<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Baby Language Lab Scripts: C:/Users/Wayne/Documents/baby-lab/bll_app/data_structs/output_calcs.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bll_icon.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Baby Language Lab Scripts
   </div>
   <div id="projectbrief">A collection of data processing tools.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('output__calcs_8py_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">output_calcs.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="output__calcs_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="code" href="namespacedata__structs_1_1output__calcs.html">    1</a></span>&#160;<span class="comment">## @package data_structs.output_calcs</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> logging</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacedb_1_1bll__database.html">db.bll_database</a> <span class="keyword">import</span> DBConstants</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacedata__structs_1_1base__objects.html">data_structs.base_objects</a> <span class="keyword">import</span> BLLObject</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceparsers_1_1filter__manager.html">parsers.filter_manager</a> <span class="keyword">import</span> FilterManager</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceutils_1_1backend__utils.html">utils.backend_utils</a> <span class="keyword">import</span> BackendUtils</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">import</span> re</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">## An OutputCalc encapsulates all of the calculations for a particular output.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">#  There is a one-to-one relationship between Outputs and OutputCalcs.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">#  This is an abstract base class - all subclasses should implement the methods defined here.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">#  Idea: the add_seg() and add_chain() methods take in segs to be included in the calculation. Finally, write_segs() is called, which writes the results to a spreadsheet file.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">#  Since output calcs can deal with either segments or chains, it is convenient to refer to them collectively as &#39;items&#39; in this documentation.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html">   17</a></span>&#160;<span class="keyword">class </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html" title="An OutputCalc encapsulates all of the calculations for a particular output.">OutputCalc</a>(<a class="code" href="classdata__structs_1_1base__objects_1_1_b_l_l_object.html" title="A custom object that provides some handy debugging routines to subclasses.">BLLObject</a>):</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="comment">## Constructor</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#a1031ef672f4267ac81a055e060971ea6">   20</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#a1031ef672f4267ac81a055e060971ea6" title="Constructor.">__init__</a>(self):</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    <span class="comment">## Retreives an ordered list of args needed to instantiate this object these will be inserted into the DB. (this list will be passed directly to the constructor when the object is reinstantiated from the DB).</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="comment">#  @returns (list) list of args to pass to the constructor when the object is recreated from the DB at a later date</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#ae076f0a77d46196de239bdb79a0f33ee">   26</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#ae076f0a77d46196de239bdb79a0f33ee" title="Retreives an ordered list of args needed to instantiate this object these will be inserted into the D...">get_db_args</a>(self):</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">## Retreives a short description string that indicates what type of calculation this object is performing (eg. &#39;Count&#39;, &#39;Time Period&#39;, etc.)</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">#  @returns (string) short type description string to display in the UI</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#aadbfe3916daf33bb3af9a05758cf0f55">   32</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#aadbfe3916daf33bb3af9a05758cf0f55" title="Retreives a short description string that indicates what type of calculation this object is performin...">get_calc_type_str</a>(self):</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">## Adds an unlinked segment to be considered in the calculations that this object is performing.</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">#  @param seg (Segment) A segment to consider in this object&#39;s calculations.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#a5ded61c6fd8360592b9e6059b4db6201">   38</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#a5ded61c6fd8360592b9e6059b4db6201" title="Adds an unlinked segment to be considered in the calculations that this object is performing...">add_seg</a>(self, seg):</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">## Adds a linked segment (i.e. an Utterance) to be considered in the calculations that this object is performing.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="comment">#  @param head (Utterance) the head of a chain of potentially linked Utterances. The whole chain will be considered in this object&#39;s calculations.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#afe2b23f5de95a21d201a8d260807a47e">   44</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#afe2b23f5de95a21d201a8d260807a47e" title="Adds a linked segment (i.e.">add_chain</a>(self, head):</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">## Writes a short description of the calculation, along with the calculation results, to a csv file.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">#  @param csv_writer (CSVWriter) this is a Python csv library writer objects, configured to write to the appropriate csv file.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#ac845cf8a2c2e0abec19005f8d1cc35c1">   50</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#ac845cf8a2c2e0abec19005f8d1cc35c1" title="Writes a short description of the calculation, along with the calculation results, to a csv file.">write_csv_rows</a>(self, csv_writer):</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">## This method clears any cached data from previous run (anything added by add_seg() or add_chain()), in preparation for new run</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#a8b01c5107e084f5267f1baf8b694b7eb">   55</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html#a8b01c5107e084f5267f1baf8b694b7eb" title="This method clears any cached data from previous run (anything added by add_seg() or add_chain())...">reset</a>(self):</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">## This OutputCalc searches for a regex match in a segment/chain phrase and counts the number of matches.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">#  The counting can be done on a per-item basis, as an average across items, or as a sum across items.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html">   60</a></span>&#160;<span class="keyword">class </span>CountOutputCalc(OutputCalc):</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">#this is an enum containing combo_options from the combo group COUNT_OUTPUT_CALC_TYPE</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a9deff5075114a94ea273359f1e9f518c">   62</a></span>&#160;    COUNT_TYPES = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">## Constructor</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">#  @param search_term (string) a Python regular expression to search for in the phrase</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">#  @param count_type (int) one of the values from the CountOutputCalc.COUNT_TYPES enum - specifies how it count (per item, avg across items, or sum across items)</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">#  @param max_count (int=-1) a maximum threshold for the matches (-1 means no threshold) that an &lt;em&gt;individual item&lt;/em&gt; can have.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a573162cbb71d84a29a5b9b1ccd6f3aae">   69</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a573162cbb71d84a29a5b9b1ccd6f3aae" title="Constructor.">__init__</a>(self, search_term, count_type, max_count=-1):</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#abee4c206cf044779eb2842c4505cf23f">   70</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#abee4c206cf044779eb2842c4505cf23f">logger</a> = logging.getLogger(__name__)</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#abdf117973dfa83ee996197c57e436276">   71</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#abdf117973dfa83ee996197c57e436276">search_term</a> = search_term</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a4d713bfac59c5b68f097658ebce0cc41">   72</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a4d713bfac59c5b68f097658ebce0cc41">count_type</a> = count_type</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#ae11ef4e67127fb1eb2f10c6e19afdd98">   73</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#ae11ef4e67127fb1eb2f10c6e19afdd98">max_count</a> = max_count</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#af2e268bc468b520742edc6b94e7af3d8" title="Initializes internal data structures used to record items added to this OutputCalc.">_init_data_structs</a>()</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">## Initializes internal data structures used to record items added to this OutputCalc.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#af2e268bc468b520742edc6b94e7af3d8">   78</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#af2e268bc468b520742edc6b94e7af3d8" title="Initializes internal data structures used to record items added to this OutputCalc.">_init_data_structs</a>(self):</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#acea83aa70e2c0cf3a0a32999ee0ba843">   79</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#acea83aa70e2c0cf3a0a32999ee0ba843">utter_dict</a> = OrderedDict()</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a67277a17b6328aee37c8ea7b6528738e">   80</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a67277a17b6328aee37c8ea7b6528738e">chain_dict</a> = OrderedDict()</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a9529d53c35f53cf4ced4fb0e1624c49e">   83</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a9529d53c35f53cf4ced4fb0e1624c49e" title="See superclass description.">reset</a>(self):</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">#clear any saved items from this instance</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#af2e268bc468b520742edc6b94e7af3d8" title="Initializes internal data structures used to record items added to this OutputCalc.">_init_data_structs</a>()</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a61e4a9c3874feca72b94ba43bd4f1507">   88</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a61e4a9c3874feca72b94ba43bd4f1507" title="See superclass description.">get_db_args</a>(self):</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">return</span> [self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#abdf117973dfa83ee996197c57e436276">search_term</a>, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a4d713bfac59c5b68f097658ebce0cc41">count_type</a>, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#ae11ef4e67127fb1eb2f10c6e19afdd98">max_count</a>]</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a5834aeb1ca53a6f7bfb0ff3a01469967">   92</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a5834aeb1ca53a6f7bfb0ff3a01469967" title="See superclass description.">get_calc_type_str</a>(self):</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;Count&#39;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a0008e63a7d2a21b1844d4dc81cb91f05">   96</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a0008e63a7d2a21b1844d4dc81cb91f05" title="See superclass description.">add_seg</a>(self, seg):</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        i = 0</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">while</span> seg.utters <span class="keywordflow">and</span> i &lt; len(seg.utters):</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="comment">#search the phrase for regex matches</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">if</span> seg.utters[i].trans_phrase:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                count = len(re.findall(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#abdf117973dfa83ee996197c57e436276">search_term</a>, seg.utters[i].trans_phrase))</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordflow">if</span> count &gt; self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#ae11ef4e67127fb1eb2f10c6e19afdd98">max_count</a> <span class="keywordflow">and</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#ae11ef4e67127fb1eb2f10c6e19afdd98">max_count</a> != -1:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    count = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#ae11ef4e67127fb1eb2f10c6e19afdd98">max_count</a></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="comment">#track the counts for each utterance in a dictionary</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                <span class="keywordflow">if</span> seg.utters[i] <span class="keywordflow">in</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#acea83aa70e2c0cf3a0a32999ee0ba843">utter_dict</a>:</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    <span class="comment">#handle case where same utterance is added twice</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#acea83aa70e2c0cf3a0a32999ee0ba843">utter_dict</a>[seg.utters[i]] += count</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#acea83aa70e2c0cf3a0a32999ee0ba843">utter_dict</a>[seg.utters[i]] = count</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            i += 1</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a1b6745c9f28a8b0bec0074991fe72125">  115</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a1b6745c9f28a8b0bec0074991fe72125" title="See superclass description.">add_chain</a>(self, head):</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordflow">if</span> head.trans_phrase: <span class="comment">#filter out untranscribed utterances</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            full_phrase = <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            cur = head</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordflow">while</span> cur:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="keywordflow">if</span> cur.trans_phrase:</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                    full_phrase += cur.trans_phrase</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    <span class="keywordflow">if</span> cur.next:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                        full_phrase += <span class="stringliteral">&#39; &#39;</span> <span class="comment">#separate with a space (for search, below)</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                cur = cur.next</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            count = len(re.findall(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#abdf117973dfa83ee996197c57e436276">search_term</a>, full_phrase))</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#ae11ef4e67127fb1eb2f10c6e19afdd98">max_count</a> != -1 <span class="keywordflow">and</span> count &gt; self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#ae11ef4e67127fb1eb2f10c6e19afdd98">max_count</a>:</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                count = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#ae11ef4e67127fb1eb2f10c6e19afdd98">max_count</a></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="comment">#track chain counts in a dictionary, keyed by their head utterance</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> head <span class="keywordflow">in</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a67277a17b6328aee37c8ea7b6528738e">chain_dict</a>:</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a67277a17b6328aee37c8ea7b6528738e">chain_dict</a>[head] = count</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="comment">#handle case where same chain is added twice</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a67277a17b6328aee37c8ea7b6528738e">chain_dict</a>[head] += count</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">## Writes out the count results for a &#39;per item&#39; count.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">#  This consists of a single line for each item, followed by its count. The total count is displayed in a row at the bottom of the section.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">#  @param chained (boolean) True if we are considering linked segments, False if unlinked.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">#  @param csv_writer (CSVWriter) Python csv library writer object, set to write to the appropriate csv file.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a5f941ea9b32eb159144456740505992c">  142</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a5f941ea9b32eb159144456740505992c" title="Writes out the count results for a &#39;per item&#39; count.">_write_per_seg</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment">#write table headers</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Start Time&#39;</span>, <span class="stringliteral">&#39;End Time&#39;</span>, <span class="stringliteral">&#39;Phrase&#39;</span>, <span class="stringliteral">&#39;Count&#39;</span>])</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        utter_list = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a67277a17b6328aee37c8ea7b6528738e">chain_dict</a> <span class="keywordflow">if</span> chained <span class="keywordflow">else</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#acea83aa70e2c0cf3a0a32999ee0ba843">utter_dict</a></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        total = 0</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="comment">#go through items, writing out each one, with its count</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">for</span> utter <span class="keywordflow">in</span> utter_list:</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="comment">#linked segments</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordflow">if</span> chained:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                phrase, tail = FilterManager.get_chain_phrase(utter)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                start = BackendUtils.get_time_str(utter.start)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                end = BackendUtils.get_time_str(tail.end)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                count = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a67277a17b6328aee37c8ea7b6528738e">chain_dict</a>[utter]</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keywordflow">if</span> count &gt; 0:</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    total += count</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    csv_writer.writerow([start,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                         end,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                         phrase.replace(<span class="stringliteral">&#39;\n&#39;</span>, <span class="stringliteral">&#39;&#39;</span>).replace(<span class="stringliteral">&#39;\r&#39;</span>, <span class="stringliteral">&#39;&#39;</span>),</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                         count,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                         ])</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="comment">#unlinked segments</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                start = BackendUtils.get_time_str(utter.start)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                end = BackendUtils.get_time_str(utter.end)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                count = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#acea83aa70e2c0cf3a0a32999ee0ba843">utter_dict</a>[utter]</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <span class="keywordflow">if</span> count &gt; 0:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                    total += count</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                    csv_writer.writerow([</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                            start,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                            end,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                            utter.trans_phrase,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                            count</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                            ])</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">#append the total count in a row at the bottom</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;&#39;</span>])</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Total:&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, total])</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">## Writes out the count results for an &#39;average across items&#39; count.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">#  This consists of a single row with the average count.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">#  The average calculation is computed as (sum of counts from all items) / number of items &lt;em&gt;containing a match&lt;\em&gt;)</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">#  @param chained (boolean) True if we are considering linked segments, False if unlinked.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">#  @param csv_writer (CSVWriter) Python csv library writer object, set to write to the appropriate csv file.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a1124fae55b46f35bd91aa40e44edd874">  190</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a1124fae55b46f35bd91aa40e44edd874" title="Writes out the count results for an &#39;average across items&#39; count.">_write_avg_across_segs</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        counts = self.chain_dict.values() <span class="keywordflow">if</span> chained <span class="keywordflow">else</span> self.utter_dict.values()</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="keywordflow">if</span> counts:</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            total = reduce(<span class="keyword">lambda</span> accum, x: accum + x, counts, 0)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            avg = float(total) / float(len(counts))</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            csv_writer.writerow([<span class="stringliteral">&#39;Avg:&#39;</span>, <span class="stringliteral">&#39;%0.3f&#39;</span> % (avg)])</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            csv_writer.writerow([<span class="stringliteral">&#39;No matches found in TRS file.&#39;</span>])</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">## Writes out the count results for a &#39;sum across items&#39; count.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">#  This consists of single row with the total sum.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">#  @param chained (boolean) True if we are considering linked segments, False if unlinked.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">#  @param csv_writer (CSVWriter) Python csv library writer object, set to write to the appropriate csv file.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a7cca6bdc4d917f292e8b168d0e5018df">  205</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a7cca6bdc4d917f292e8b168d0e5018df" title="Writes out the count results for a &#39;sum across items&#39; count.">_write_sum_across_segs</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        counts = self.chain_dict.values() <span class="keywordflow">if</span> chained <span class="keywordflow">else</span> self.utter_dict.values()</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        total = reduce(<span class="keyword">lambda</span> accum, x: accum + x, counts, 0)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Sum:&#39;</span>, total])</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a463ba845592098e04f37e3345000a747">  212</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a463ba845592098e04f37e3345000a747" title="See superclass description.">write_csv_rows</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        combo_option = DBConstants.COMBOS[DBConstants.COMBO_GROUPS.COUNT_OUTPUT_CALC_TYPES][self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a4d713bfac59c5b68f097658ebce0cc41">count_type</a>]</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Count:&#39;</span>, combo_option.disp_desc])</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Search Term:&#39;</span>, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#abdf117973dfa83ee996197c57e436276">search_term</a>])</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">#call the appropriate method based on the type setting</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        {CountOutputCalc.COUNT_TYPES.PER_SEG: self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a5f941ea9b32eb159144456740505992c" title="Writes out the count results for a &#39;per item&#39; count.">_write_per_seg</a>,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         CountOutputCalc.COUNT_TYPES.AVG_ACROSS_SEGS: self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a1124fae55b46f35bd91aa40e44edd874" title="Writes out the count results for an &#39;average across items&#39; count.">_write_avg_across_segs</a>,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         CountOutputCalc.COUNT_TYPES.SUM_ACROSS_SEGS: self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a7cca6bdc4d917f292e8b168d0e5018df" title="Writes out the count results for a &#39;sum across items&#39; count.">_write_sum_across_segs</a>,</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;         }[self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_count_output_calc.html#a4d713bfac59c5b68f097658ebce0cc41">count_type</a>](chained, csv_writer)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">## This OutputCalc searches for a regex match in a segment/chain phrase and counts the number of matches, then divides the count by the length of the segment in seconds.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">#  The output is a measure of count/sec. This can be computed for each item individually (&#39;per item&#39;), or as an average across items.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html">  225</a></span>&#160;<span class="keyword">class </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html" title="This OutputCalc searches for a regex match in a segment/chain phrase and counts the number of matches...">RateOutputCalc</a>(<a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html" title="An OutputCalc encapsulates all of the calculations for a particular output.">OutputCalc</a>):</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">#this is an enum containing options from combo group RATE_OUTPUT_CALC_TYPE</span></div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#afd09baeeee9615a947631a7dcf80650b">  227</a></span>&#160;    RATE_TYPES = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="comment">## Constructor</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">#  @param search term (string) a Python regular expression to search for in the the item phrases.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">#  @param rate_type (int) one of the options from the enum RateOutputCalc.RATE_TYPES - indicating how the rate is to be calculated (per item, or average across items)</span></div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a515b76f23a343cd2bdd361c92eca047d">  233</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a515b76f23a343cd2bdd361c92eca047d" title="Constructor.">__init__</a>(self, search_term, rate_type):</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ab75e945d9fa18212fed2b0d31392a8f4">  234</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ab75e945d9fa18212fed2b0d31392a8f4">logger</a> = logging.getLogger(__name__)</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a0803e7c287ea75a6f3072f0db0cf9751">  235</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a0803e7c287ea75a6f3072f0db0cf9751">search_term</a> = search_term</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a5b6fea14c0474dfc439ff785e51e79f4">  236</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a5b6fea14c0474dfc439ff785e51e79f4">rate_type</a> = rate_type</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a6fb87bf780af05f773f5512d8d2c70f6" title="Initializes internal data structures used to record items added to this OutputCalc.">_init_data_structs</a>()</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment">## Initializes internal data structures used to record items added to this OutputCalc.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a6fb87bf780af05f773f5512d8d2c70f6">  241</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a6fb87bf780af05f773f5512d8d2c70f6" title="Initializes internal data structures used to record items added to this OutputCalc.">_init_data_structs</a>(self):</div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ac4153e68b3fa5efa33c9105043ca303a">  242</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ac4153e68b3fa5efa33c9105043ca303a">chain_dict</a> = OrderedDict()</div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a581cc3f5bb32c01715ef395ef65f6582">  243</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a581cc3f5bb32c01715ef395ef65f6582">utter_dict</a> = OrderedDict()</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a2f41f1bd9bc678a00e7601ca4deaf8a0">  246</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a2f41f1bd9bc678a00e7601ca4deaf8a0" title="See superclass description.">reset</a>(self):</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a6fb87bf780af05f773f5512d8d2c70f6" title="Initializes internal data structures used to record items added to this OutputCalc.">_init_data_structs</a>()</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a8ae9b2ebaa844829a452c354b8b902fa">  250</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a8ae9b2ebaa844829a452c354b8b902fa" title="See superclass description.">get_db_args</a>(self):</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">return</span> [self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a0803e7c287ea75a6f3072f0db0cf9751">search_term</a>, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a5b6fea14c0474dfc439ff785e51e79f4">rate_type</a>]</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ad85ae79108157a15211b7db7a942c044">  254</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ad85ae79108157a15211b7db7a942c044" title="See superclass description.">get_calc_type_str</a>(self):</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;Rate&#39;</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a95875c7b3400b795b755ea15c1a99b8a">  258</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a95875c7b3400b795b755ea15c1a99b8a" title="See superclass description.">add_seg</a>(self, seg):</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        i = 0</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">while</span> seg.utters <span class="keywordflow">and</span> i &lt; len(seg.utters):</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="comment">#search the phrase for regex matches</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">if</span> seg.utters[i].trans_phrase:</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                count = len(re.findall(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a0803e7c287ea75a6f3072f0db0cf9751">search_term</a>, seg.utters[i].trans_phrase))</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="comment">#skip utters with no end/start time recorded</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                <span class="keywordflow">if</span> seg.utters[i].end != <span class="keywordtype">None</span> <span class="keywordflow">and</span> seg.utters[i].start != <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                    time = seg.utters[i].end - seg.utters[i].start</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                    <span class="comment">#record the result in a dictionary, keyed by utterance. Each entry is a tuple of the form (number of matches, length of segment in seconds)</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    <span class="keywordflow">if</span> seg.utters[i] <span class="keywordflow">in</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a581cc3f5bb32c01715ef395ef65f6582">utter_dict</a>:</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a581cc3f5bb32c01715ef395ef65f6582">utter_dict</a>[seg.utters[i]][0] += count</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a581cc3f5bb32c01715ef395ef65f6582">utter_dict</a>[seg.utters[i]][1] += time</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a581cc3f5bb32c01715ef395ef65f6582">utter_dict</a>[seg.utters[i]] = (count, time)</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            i += 1</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#abc0a6d8296094afe750ee558f71b2fa6">  278</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#abc0a6d8296094afe750ee558f71b2fa6" title="See superclass description.">add_chain</a>(self, head):</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">if</span> head.trans_phrase: <span class="comment">#filter out untranscribed utterances</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            count = 0</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            i = 0</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            cur = head</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            tail = head</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="comment">#count the number of matches in the whole chain</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">while</span> cur:</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="keywordflow">if</span> cur.trans_phrase:</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                    count += len(re.findall(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a0803e7c287ea75a6f3072f0db0cf9751">search_term</a>, cur.trans_phrase))</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                tail = cur</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                cur = cur.next</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="comment">#skip chains with no end/start time recorded</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span> tail.end != <span class="keywordtype">None</span> <span class="keywordflow">and</span> head.start != <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                time = tail.end - head.start</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                <span class="comment">#record the result in a dictionary, keyed by the head utterance. Each entry is a tuple of the form (number of matches, length of segment in seconds)</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> head <span class="keywordflow">in</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a581cc3f5bb32c01715ef395ef65f6582">utter_dict</a>:</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ac4153e68b3fa5efa33c9105043ca303a">chain_dict</a>[head] = (count, time)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                    self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ac4153e68b3fa5efa33c9105043ca303a">chain_dict</a>[head][0] += count</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                    self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ac4153e68b3fa5efa33c9105043ca303a">chain_dict</a>[head][1] += time</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">## Writes the results for a &#39;per item&#39; rate calculation to a spreadsheet file.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">#  This consists of a single row for each item, with it&#39;s corresponding rate.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">#  @param chained (boolean) True if we are considering linked segments, False if unlinked.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">#  @param csv_writer (CSVWriter) Python csv library writer object, set to write to the appropriate csv file.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a8f717117634d96a8657395642eb16ff6">  306</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a8f717117634d96a8657395642eb16ff6" title="Writes the results for a &#39;per item&#39; rate calculation to a spreadsheet file.">_write_per_seg</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">#write headers row</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Start Time&#39;</span>, <span class="stringliteral">&#39;End Time&#39;</span>, <span class="stringliteral">&#39;Phrase&#39;</span>, <span class="stringliteral">&#39;Occurances&#39;</span>, <span class="stringliteral">&#39;Time Elapsed(sec)&#39;</span>, <span class="stringliteral">&#39;Rate (occurrances/sec)&#39;</span>])</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="comment">#go through all items, performing the rate calculation and writing it to the spreadsheet file</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        utter_list = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ac4153e68b3fa5efa33c9105043ca303a">chain_dict</a> <span class="keywordflow">if</span> chained <span class="keywordflow">else</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a581cc3f5bb32c01715ef395ef65f6582">utter_dict</a></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">for</span> utter <span class="keywordflow">in</span> utter_list:</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            start = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            end = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            phrase = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            rate = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            count = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            time = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="keywordflow">if</span> chained:</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="comment">#count number of matches in entire chain</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                phrase, tail = FilterManager.get_chain_phrase(utter)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                start = utter.start</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                end = tail.end</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                count, time = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ac4153e68b3fa5efa33c9105043ca303a">chain_dict</a>[utter]</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                rate = float(count) / float(time)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                start = utter.start</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                end = utter.end</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                phrase = utter.trans_phrase</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                count, time = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a581cc3f5bb32c01715ef395ef65f6582">utter_dict</a>[utter]</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                rate = float(count) / float(time)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            csv_writer.writerow([BackendUtils.get_time_str(start),</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                                 BackendUtils.get_time_str(end),</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                                 phrase.replace(<span class="stringliteral">&#39;\n&#39;</span>, <span class="stringliteral">&#39;&#39;</span>).replace(<span class="stringliteral">&#39;\r&#39;</span>, <span class="stringliteral">&#39;&#39;</span>),</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                 count,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                                 time,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                                 rate,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                 ])</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">## Writes the results for a &#39;average across items&#39; rate calculation to a spreadsheet file.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">#  This consists of a single row containing the average.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">#  The average is calculated as (sum of number of matches across all items) / (sum of lengths of &lt;em&gt;all&lt;/em&gt; items, in seconds)</span></div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a30969dbc5fb1769f509dfe9837fce8a5">  346</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a30969dbc5fb1769f509dfe9837fce8a5" title="Writes the results for a &#39;average across items&#39; rate calculation to a spreadsheet file...">_write_avg_across_segs</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        pairs = self.chain_dict.values() <span class="keywordflow">if</span> chained <span class="keywordflow">else</span> self.utter_dict.values()</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        total_time = 0.0</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        total_count = 0</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">for</span> cur_pair <span class="keywordflow">in</span> pairs:</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            count, time = cur_pair</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            total_count += count</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            total_time += time</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        avg = float(total_count) / total_time</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Avg:&#39;</span>, avg])</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ad5ffff171edd2b349389c1a07813551c">  361</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#ad5ffff171edd2b349389c1a07813551c" title="See superclass description.">write_csv_rows</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        combo_option = DBConstants.COMBOS[DBConstants.COMBO_GROUPS.RATE_OUTPUT_CALC_TYPES][self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a5b6fea14c0474dfc439ff785e51e79f4">rate_type</a>]</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Rate:&#39;</span>, combo_option.disp_desc])</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Search Term:&#39;</span>, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a0803e7c287ea75a6f3072f0db0cf9751">search_term</a>])</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="comment">#call the appropriate method based on the type setting</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        {RateOutputCalc.RATE_TYPES.PER_SEG: self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a8f717117634d96a8657395642eb16ff6" title="Writes the results for a &#39;per item&#39; rate calculation to a spreadsheet file.">_write_per_seg</a>,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;         RateOutputCalc.RATE_TYPES.AVG_ACROSS_SEGS: self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a30969dbc5fb1769f509dfe9837fce8a5" title="Writes the results for a &#39;average across items&#39; rate calculation to a spreadsheet file...">_write_avg_across_segs</a>,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;         }[self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_rate_output_calc.html#a5b6fea14c0474dfc439ff785e51e79f4">rate_type</a>](chained, csv_writer)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">## This OutputCalc searches for a regex match in the items&#39; phrases, and calculates the total length of the items (in seconds) that contain a match.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html">  372</a></span>&#160;<span class="keyword">class </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html" title="This OutputCalc searches for a regex match in the items&#39; phrases, and calculates the total length of ...">TimePeriodOutputCalc</a>(<a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html" title="An OutputCalc encapsulates all of the calculations for a particular output.">OutputCalc</a>):</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">## Constructor</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">#  @param search term (string) a Python regular expression to search for in the the item phrases.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#aa7d91af4304ebbf9190ed5c5e1e081db">  376</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#aa7d91af4304ebbf9190ed5c5e1e081db" title="Constructor.">__init__</a>(self, search_term):</div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a7e86ac58a46357a2a0fc691b394bf77b">  377</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a7e86ac58a46357a2a0fc691b394bf77b">logger</a> = logging.getLogger(__name__)</div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#ab40ef6125b1c4b30c2cd94a6c8fa263c">  378</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#ab40ef6125b1c4b30c2cd94a6c8fa263c">search_term</a> = search_term</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#afd0526d9f8644786bd579517d6a1779c" title="Initializes the data structures used to record the items added to this OutputCalc.">_init_data_structs</a>()</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="comment">## Initializes the data structures used to record the items added to this OutputCalc.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#afd0526d9f8644786bd579517d6a1779c">  382</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#afd0526d9f8644786bd579517d6a1779c" title="Initializes the data structures used to record the items added to this OutputCalc.">_init_data_structs</a>(self):</div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a9acc28c47d0a308a9b029f4e241e9204">  383</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a9acc28c47d0a308a9b029f4e241e9204">utters_dict</a> = {}</div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a4523526d4cf51b4bc2db79f395677dcd">  384</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a4523526d4cf51b4bc2db79f395677dcd">chains_dict</a> = {}</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        </div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a4ce92b52fef508d5f400c6671259cd50">  386</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a4ce92b52fef508d5f400c6671259cd50">utters_filtered_time</a> = 0.0</div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a05111243581f08555f640cc072acca0f">  387</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a05111243581f08555f640cc072acca0f">chains_filtered_time</a> = 0.0</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a14dd4c82d080c0c19a007d153df33c08">  390</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a14dd4c82d080c0c19a007d153df33c08" title="See superclass description.">reset</a>(self):</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#afd0526d9f8644786bd579517d6a1779c" title="Initializes the data structures used to record the items added to this OutputCalc.">_init_data_structs</a>()</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00394"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a31594c624ed81b945057752605f7f237">  394</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a31594c624ed81b945057752605f7f237" title="See superclass description.">get_db_args</a>(self):</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">return</span> [self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#ab40ef6125b1c4b30c2cd94a6c8fa263c">search_term</a>]</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a0c13edb570d02b976f5034b107e222f9">  398</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a0c13edb570d02b976f5034b107e222f9" title="See superclass description.">get_calc_type_str</a>(self):</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;Time Period&#39;</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">## Searches through the internal dictionary for a key that intersects with the specified start and end times.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">#  The dictionary is keyed by tuples of the form (start_time, end_time).</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">#  This routine checks to see if the specified start and end range intersects with any key tuple already in the dictionary.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">#  @param start (float) an Utterance start time</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">#  @param end (float) an Utterance end time</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">#  @returns (tuple) if an intersecting tuple is found, that tuple is returned. Else None is returned.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a0ad7c57a12da07ae2d28a9e10de491fd">  408</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a0ad7c57a12da07ae2d28a9e10de491fd" title="Searches through the internal dictionary for a key that intersects with the specified start and end t...">_get_chain_intersection</a>(self, start, end):</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        found_key = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        keys = self.chains_dict.keys()</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        i = 0</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">while</span> <span class="keywordflow">not</span> found_key <span class="keywordflow">and</span> i &lt; len(keys):</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span> ( (start &gt;= keys[i][0] <span class="keywordflow">and</span> start &lt;= keys[i][1]) <span class="keywordflow">or</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                 (end &lt;= keys[i][1] <span class="keywordflow">and</span> end &gt;= keys[i][0]) ):</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                found_key = keys[i]</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            i += 1</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">return</span> found_key</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">## Searched through the phrases of Utterances in a chain, for a match against the regex.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">#  @param head (Utterance) head of the chain to search</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">#  @returns (boolean) True if a match was found anywhere in the chain phrase, False otherwise.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a6d0500f9690794d8558023bc69fad1ae">  425</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a6d0500f9690794d8558023bc69fad1ae" title="Searched through the phrases of Utterances in a chain, for a match against the regex.">_search_chain_phrase</a>(self, head):</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        cur = head</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        found = <span class="keyword">False</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">while</span> <span class="keywordflow">not</span> found <span class="keywordflow">and</span> cur:</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">if</span> cur.trans_phrase:</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                found = re.search(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#ab40ef6125b1c4b30c2cd94a6c8fa263c">search_term</a>, cur.trans_phrase) != <span class="keywordtype">None</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            cur = cur.next</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="keywordflow">return</span> found</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">#  We may have segments that start and end at exactly the same time.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="comment">#  We are guarenteed never to have segments that intersect in other ways.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#adebb8385743d75b82abbc03fd7a1e115">  439</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#adebb8385743d75b82abbc03fd7a1e115" title="See superclass description.">add_seg</a>(self, seg):</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">for</span> utter <span class="keywordflow">in</span> seg.utters:</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="comment">#make sure the Utterance has a start and end time so we can calculate it&#39;s length. Also make sure it&#39;s been transcribed.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">if</span> utter.end != <span class="keywordtype">None</span> <span class="keywordflow">and</span> utter.start != <span class="keywordtype">None</span> <span class="keywordflow">and</span> utter.trans_phrase:</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                <span class="comment">#only store an entry in the dictionary if an Utterance with equivalent start/end times is not already present</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> (utter.start, utter.end) <span class="keywordflow">in</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a9acc28c47d0a308a9b029f4e241e9204">utters_dict</a>:</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                    self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a9acc28c47d0a308a9b029f4e241e9204">utters_dict</a>[(utter.start, utter.end)] = <span class="keyword">True</span> <span class="comment">#it doesn&#39;t matter what we store here - the key is the important part. We&#39;re just using a dictionary for it&#39;s fast lookup abilities.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    <span class="comment">#maintain a sum of the lengths of the segments that have been inserted (and contain a match)</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    <span class="keywordflow">if</span> utter.trans_phrase <span class="keywordflow">and</span> re.search(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#ab40ef6125b1c4b30c2cd94a6c8fa263c">search_term</a>, utter.trans_phrase):</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a4ce92b52fef508d5f400c6671259cd50">utters_filtered_time</a> += (utter.end - utter.start)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">#  Here things are more complicated than in add_seg() because chains can intersect in time (in any way).</span></div>
<div class="line"><a name="l00453"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a93231e0b54779a99e8684fc38b1c1904">  453</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a93231e0b54779a99e8684fc38b1c1904" title="See superclass description.">add_chain</a>(self, head):</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="comment">#only proceed if the first Utterance is transcribed</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">if</span> head.trans_phrase:</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            tail = FilterManager.get_endpoint(FilterManager.ENDPOINT_TYPES.TAIL, head)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="comment">#make sure both start and end times on the the ends of the chain are present</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">if</span> tail.end != <span class="keywordtype">None</span> <span class="keywordflow">and</span> head.start != <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                <span class="comment">#if we find a match, check for intersection in the internal dictionary</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                <span class="keywordflow">if</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a6d0500f9690794d8558023bc69fad1ae" title="Searched through the phrases of Utterances in a chain, for a match against the regex.">_search_chain_phrase</a>(head):</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    key_tuple = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a0ad7c57a12da07ae2d28a9e10de491fd" title="Searches through the internal dictionary for a key that intersects with the specified start and end t...">_get_chain_intersection</a>(head.start, tail.end)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    new_key_tuple = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                    <span class="comment">#if an intersection occurred we need to figure out how to adjust things...</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                    <span class="keywordflow">if</span> key_tuple:</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        <span class="comment">#remove the intersecting key and subtract it&#39;s length from the sum (this sum was previously added)</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                        self.chains_dict.pop(key_tuple)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a05111243581f08555f640cc072acca0f">chains_filtered_time</a> -= (key_tuple[1] - key_tuple[0])</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                        <span class="comment">#Obtain the widest (start, end) range by comparing the intersecting key with the start and end times of the Utterance we&#39;re trying to insert.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                        <span class="comment">#This new key will be inserted into the dictionary below.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                        <span class="comment">#This ensures that we will always detect future intersections.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                        new_key_tuple = (min(key_tuple[0], head.start), max(key_tuple[1], tail.end))</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                        </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                    <span class="comment">#if no intersection occurred, we can just add the (start, end) tuple of the head Utterance to the dictionary</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                        new_key_tuple = (head.start, tail.end)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                    <span class="comment">#factor the length of the new key into the sum, and add the key to the internal dictionary</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                    self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a05111243581f08555f640cc072acca0f">chains_filtered_time</a> += (new_key_tuple[1] - new_key_tuple[0])</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                    self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a4523526d4cf51b4bc2db79f395677dcd">chains_dict</a>[new_key_tuple] = <span class="keyword">True</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a714b8c154aeee9b5d44a0111dfba90a2">  484</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a714b8c154aeee9b5d44a0111dfba90a2" title="See superclass description.">write_csv_rows</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Time Period&#39;</span>])</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        total_time = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a05111243581f08555f640cc072acca0f">chains_filtered_time</a> <span class="keywordflow">if</span> chained <span class="keywordflow">else</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#a4ce92b52fef508d5f400c6671259cd50">utters_filtered_time</a></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Search Term:&#39;</span>, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_time_period_output_calc.html#ab40ef6125b1c4b30c2cd94a6c8fa263c">search_term</a>])</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Time Containg Matches:&#39;</span>, BackendUtils.get_time_str(total_time)])</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">## This type of OutputCalc constructs a table of counts.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">#  The user can select two transcriber codes. The first is the row criteria. All elements of the code are enumerated along the left (vertical axis) side of the table.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">#  The second is the column criteria. All elements of this code are enumerated along the top (horizontal axis) of the table.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">#  Each internal table cell will contain a count of the number of items found that have both the horizontal and vertical codes.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html">  496</a></span>&#160;<span class="keyword">class </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html" title="This type of OutputCalc constructs a table of counts.">BreakdownOutputCalc</a>(<a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html" title="An OutputCalc encapsulates all of the calculations for a particular output.">OutputCalc</a>):</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment">#This is an enum of options from BREAKDOWN_OUTPUT_CALC_CRITERIA</span></div>
<div class="line"><a name="l00498"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a5779c4a1492cbb3bd6aeaee078afb7f0">  498</a></span>&#160;    BREAKDOWN_CRITERIA = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">## Constructor</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">#  @param row_criteria (int) one of the values from the enum BreakdownOutputCalc.BREAKDOWN_CRITERIA. Indicates the row code.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">#  @param col_criteria (int) one of the values from the enum BreakdownOutputCalc.BREAKDOWN_CRITERIA. Indicates the column code.</span></div>
<div class="line"><a name="l00504"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a5098928acaf3b63c6b3b3a430bd2fe41">  504</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a5098928acaf3b63c6b3b3a430bd2fe41" title="Constructor.">__init__</a>(self, row_criteria, col_criteria):</div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#aac2323cce00bb4464fe0f2df7b28cdfd">  505</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#aac2323cce00bb4464fe0f2df7b28cdfd">logger</a> = logging.getLogger(<span class="stringliteral">&#39;stats_app&#39;</span>)</div>
<div class="line"><a name="l00506"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a26e69f3938dc9bb7c6c88624773f33eb">  506</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a26e69f3938dc9bb7c6c88624773f33eb">row_criteria</a> = row_criteria</div>
<div class="line"><a name="l00507"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68d76d5a4fb94a2f1f7da3bb66370644">  507</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68d76d5a4fb94a2f1f7da3bb66370644">col_criteria</a> = col_criteria</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a9eb425c9faf6b34c6955eb09d8949b49" title="Initializes data structs used to keep track of items added to this OutputCalc.">_init_data_structs</a>()</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">## Initializes data structs used to keep track of items added to this OutputCalc.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00512"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a9eb425c9faf6b34c6955eb09d8949b49">  512</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a9eb425c9faf6b34c6955eb09d8949b49" title="Initializes data structs used to keep track of items added to this OutputCalc.">_init_data_structs</a>(self):</div>
<div class="line"><a name="l00513"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68c0734ffce8bf4a3298c1697feb8331">  513</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68c0734ffce8bf4a3298c1697feb8331">seg_list</a> = []</div>
<div class="line"><a name="l00514"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#aefe4ab4c478d1c344b616198ececd1a7">  514</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#aefe4ab4c478d1c344b616198ececd1a7">chain_list</a> = []</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a6e756ee1da4961cb8ea6a78fa0019744">  517</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a6e756ee1da4961cb8ea6a78fa0019744" title="See superclass description.">reset</a>(self):</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a9eb425c9faf6b34c6955eb09d8949b49" title="Initializes data structs used to keep track of items added to this OutputCalc.">_init_data_structs</a>()</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a96e9a0730ca3f7cdc7b98fe6a0f59074">  521</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a96e9a0730ca3f7cdc7b98fe6a0f59074" title="See superclass description.">get_db_args</a>(self):</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">return</span> [self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a26e69f3938dc9bb7c6c88624773f33eb">row_criteria</a>, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68d76d5a4fb94a2f1f7da3bb66370644">col_criteria</a>]</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#ae0659dc237459ef07fbca7b63e14e308">  525</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#ae0659dc237459ef07fbca7b63e14e308" title="See superclass description.">get_calc_type_str</a>(self):</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;Breakdown&#39;</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#ae9ee3bb7ab5f776a4c59dbee62a09551">  529</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#ae9ee3bb7ab5f776a4c59dbee62a09551" title="See superclass description.">add_seg</a>(self, seg):</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        self.seg_list.append(seg)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a2ace72d265d0fb259eef15cf888b5a91">  533</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a2ace72d265d0fb259eef15cf888b5a91" title="See superclass description.">add_chain</a>(self, head):</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        self.chain_list.append(head)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">## Given a row or column criteria selected by the user, provides the corresponding transcriber code index.</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">#  @param criteria (int) an option from BreakdownOutputCalc.BREAKDOWN_CRITERIA</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="comment">#  @returns (int) the index (zero-based) of the transcriber code corresponding the specified criteria that the user has selected</span></div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a2ca535579928aec4888c44096f3b8966">  540</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a2ca535579928aec4888c44096f3b8966" title="Given a row or column criteria selected by the user, provides the corresponding transcriber code inde...">_get_trans_code_index</a>(self, criteria):</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">return</span> {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            BreakdownOutputCalc.BREAKDOWN_CRITERIA.SPEAKER_TYPE: 0,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            BreakdownOutputCalc.BREAKDOWN_CRITERIA.TARGET_LISTENER: 1,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            BreakdownOutputCalc.BREAKDOWN_CRITERIA.COMPLETENESS: 2,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            BreakdownOutputCalc.BREAKDOWN_CRITERIA.UTTERANCE_TYPE: 3,</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            }[criteria]</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">## Determines the transcriber code index that the specified criteria corresponds to, then returns the code in that index from the specified Utterance.</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">#  @self</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">#  @utter (Utterance) the utterance who&#39;s code you want to grab</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment">#  @criteria (int) an option from BreakdownOutputCalc.BREAKDOWN_CRITERIA</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment">#  @returns (string) a transcriber code, or None if the Utterance has no transcriber codes</span></div>
<div class="line"><a name="l00553"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a0b4e1a02cf3cb8a76a62c9c410efaf7e">  553</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a0b4e1a02cf3cb8a76a62c9c410efaf7e" title="Determines the transcriber code index that the specified criteria corresponds to, then returns the co...">_get_utter_criteria_code</a>(self, utter, criteria):</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        code = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        trans_code_index = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a2ca535579928aec4888c44096f3b8966" title="Given a row or column criteria selected by the user, provides the corresponding transcriber code inde...">_get_trans_code_index</a>(criteria)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">if</span> len(utter.trans_codes) &gt; trans_code_index:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            code = utter.trans_codes[trans_code_index]</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">return</span> code</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="comment">#  This method writes out the table of counts to a spreadsheet file.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="comment">#  The user can select two codes. The first is the row criteria. All elements of the code are enumerated along the left (vertical axis) side of the table.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="comment">#  The second is the column criteria. All elements of this code are enumerated along the top (horizontal axis) of the table.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="comment">#  Each internal table cell will contain a count of the number of items found that have both the horizontal and vertical codes.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">#  In cases where codes can have multiple characters (eg. transcriber code 3), only the single codes will be enumerated in the table headers.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">#  If items are found containing multiple character codes, then each character in the code increments one cell (the item will be &#39;counted once for each character&#39;&#39;).</span></div>
<div class="line"><a name="l00568"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#ad0ea2d71a92b40539264ef4717e57c6a">  568</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#ad0ea2d71a92b40539264ef4717e57c6a" title="See superclass description.">write_csv_rows</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        row_combo = DBConstants.COMBOS[DBConstants.COMBO_GROUPS.BREAKDOWN_OUTPUT_CALC_CRITERIA][self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a26e69f3938dc9bb7c6c88624773f33eb">row_criteria</a>]</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        col_combo = DBConstants.COMBOS[DBConstants.COMBO_GROUPS.BREAKDOWN_OUTPUT_CALC_CRITERIA][self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68d76d5a4fb94a2f1f7da3bb66370644">col_criteria</a>]</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Row Criteria:&#39;</span>, row_combo.disp_desc])</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Column Criteria:&#39;</span>, col_combo.disp_desc])</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="comment">#build an array of all possible options for the code corresponding to the row criteria</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        row_code_index = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a2ca535579928aec4888c44096f3b8966" title="Given a row or column criteria selected by the user, provides the corresponding transcriber code inde...">_get_trans_code_index</a>(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a26e69f3938dc9bb7c6c88624773f33eb">row_criteria</a>)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        row_code = DBConstants.TRANS_CODES[row_code_index]</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        row_code_strs = row_code.get_all_options_codes()</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="comment">#do the same for the column criteria</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        col_code_index = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a2ca535579928aec4888c44096f3b8966" title="Given a row or column criteria selected by the user, provides the corresponding transcriber code inde...">_get_trans_code_index</a>(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68d76d5a4fb94a2f1f7da3bb66370644">col_criteria</a>)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        col_code = DBConstants.TRANS_CODES[col_code_index]</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        col_code_strs = col_code.get_all_options_codes()</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;&#39;</span>] + col_code_strs) <span class="comment"># headers (note: top left cell is blank)</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="comment">#this has records the values of the internal table cells</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        count_hash = OrderedDict()</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="comment">#locate our data source</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        data_list = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#aefe4ab4c478d1c344b616198ececd1a7">chain_list</a> <span class="keywordflow">if</span> chained <span class="keywordflow">else</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68c0734ffce8bf4a3298c1697feb8331">seg_list</a></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="comment">#initialize all table cell values to 0</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">for</span> row <span class="keywordflow">in</span> row_code_strs:</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            count_hash[row] = OrderedDict()</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">for</span> col <span class="keywordflow">in</span> col_code_strs:</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                count_hash[row][col] = 0</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="comment">#go through the data, incrementing the appropriate table cells in the count_hash</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">for</span> datum <span class="keywordflow">in</span> data_list:</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="keywordflow">if</span> chained:</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                <span class="keywordflow">if</span> datum.trans_phrase: <span class="comment">#filter out untranscribed utters</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                    <span class="comment">#Each chain contributes one to the count (with the exception of those containing multi-char codes).</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                    <span class="comment">#It is assumed that the head has the same trans codes as the rest (with exception of C code in tail).</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                    row_code = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a0b4e1a02cf3cb8a76a62c9c410efaf7e" title="Determines the transcriber code index that the specified criteria corresponds to, then returns the co...">_get_utter_criteria_code</a>(datum, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a26e69f3938dc9bb7c6c88624773f33eb">row_criteria</a>)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    col_code = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a0b4e1a02cf3cb8a76a62c9c410efaf7e" title="Determines the transcriber code index that the specified criteria corresponds to, then returns the co...">_get_utter_criteria_code</a>(datum, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68d76d5a4fb94a2f1f7da3bb66370644">col_criteria</a>)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                    <span class="keywordflow">if</span> row_code != <span class="keywordtype">None</span> <span class="keywordflow">and</span> col_code != <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                        <span class="keywordflow">for</span> row_char <span class="keywordflow">in</span> row_code: <span class="comment">#for multi-char codes, increment count_hash individually for each char</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                            <span class="keywordflow">for</span> col_char <span class="keywordflow">in</span> col_code:</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                                <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                    count_hash[row_char][col_char] += 1</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                    </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                <span class="keywordflow">except</span> KeyError <span class="keyword">as</span> err:</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                    self.logger.info(<span class="stringliteral">&#39;Output Calc encountered unrecognized key: %s&#39;</span> % (err))</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                    self.logger.info(<span class="stringliteral">&#39;row_code: %s, col_code: %s&#39;</span> % (row_code, col_code))</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                    self.logger.info(<span class="stringliteral">&#39;Utterance: %s&#39;</span> % (datum))</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                    </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                    <span class="comment">#also dump to stdout for now to make it obvious</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                                    <span class="keywordflow">print</span> <span class="stringliteral">&#39;Output Calc encountered unrecognized key: %s&#39;</span> % (err)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                    <span class="keywordflow">print</span> <span class="stringliteral">&#39;row_code: %s, col_code: %s&#39;</span> % (row_code, col_code)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                utter_index = 0</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                <span class="keywordflow">while</span> datum.utters <span class="keywordflow">and</span> utter_index &lt; len(datum.utters):</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                    <span class="keywordflow">if</span> datum.utters[utter_index].trans_phrase: <span class="comment">#filter out untranscribed utters</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                        row_code = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a0b4e1a02cf3cb8a76a62c9c410efaf7e" title="Determines the transcriber code index that the specified criteria corresponds to, then returns the co...">_get_utter_criteria_code</a>(datum.utters[utter_index], self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a26e69f3938dc9bb7c6c88624773f33eb">row_criteria</a>)</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                        col_code = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a0b4e1a02cf3cb8a76a62c9c410efaf7e" title="Determines the transcriber code index that the specified criteria corresponds to, then returns the co...">_get_utter_criteria_code</a>(datum.utters[utter_index], self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_breakdown_output_calc.html#a68d76d5a4fb94a2f1f7da3bb66370644">col_criteria</a>)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                        <span class="keywordflow">if</span> row_code != <span class="keywordtype">None</span> <span class="keywordflow">and</span> col_code != <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                            <span class="keywordflow">for</span> row_char <span class="keywordflow">in</span> row_code: <span class="comment">#for multi-char codes, increment count_hash individually for each char</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                                <span class="keywordflow">for</span> col_char <span class="keywordflow">in</span> col_code:</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                    <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                        count_hash[row_char][col_char] += 1</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                        </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                    <span class="keywordflow">except</span> KeyError <span class="keyword">as</span> err:</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                        self.logger.info(<span class="stringliteral">&#39;Output Calc encountered unrecognized key: %s&#39;</span> % (err))</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                        self.logger.info(<span class="stringliteral">&#39;row_code: %s, col_code: %s&#39;</span> % (row_code, col_code))</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                        self.logger.info(<span class="stringliteral">&#39;Utterance: %s&#39;</span> % (datum))</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                                        <span class="comment">#also dump to stdout for now to make it obvious</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                                        <span class="keywordflow">print</span> <span class="stringliteral">&#39;Output Calc encountered unrecognized key: %s&#39;</span> % (err)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                        <span class="keywordflow">print</span> <span class="stringliteral">&#39;row_code: %s, col_code: %s&#39;</span> % (row_code, col_code)</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                    utter_index += 1</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="comment">#add column (vertical) headers and count_matrix rows to spreadsheet</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">for</span> row_key <span class="keywordflow">in</span> count_hash:</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            csv_writer.writerow( [row_key] + map(<span class="keyword">lambda</span> col_key: count_hash[row_key][col_key], count_hash[row_key]) )</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">## This type of OutputCalc searches for a regex match in the phrase of items. Items containing one or more matches are shown in a list. The list is grouped by a particular (user-selected) transcriber code.</span></div>
<div class="line"><a name="l00650"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html">  650</a></span>&#160;<span class="keyword">class </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html" title="This type of OutputCalc searches for a regex match in the phrase of items.">ListOutputCalc</a>(<a class="code" href="classdata__structs_1_1output__calcs_1_1_output_calc.html" title="An OutputCalc encapsulates all of the calculations for a particular output.">OutputCalc</a>):</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">#this is an enum of combo options from the LIST_OUTPUT_CALC_CATS combo group</span></div>
<div class="line"><a name="l00652"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a29a1abf82c6f6efae0f530ca10ecf1e4">  652</a></span>&#160;    LIST_CATS = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">## Constructor</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="comment">#  @param search_term (string) a Python regular expression</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">#  @cat (int) one of the options from ListOutpuCalc.LIST_CATS. Indicates which transcriber code to group by.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#aa7085186d148cec81f86527c1ef33f76">  658</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#aa7085186d148cec81f86527c1ef33f76" title="Constructor.">__init__</a>(self, search_term, cat):</div>
<div class="line"><a name="l00659"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#ac78c364697d1e2d9d6d0ea244beddf8a">  659</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#ac78c364697d1e2d9d6d0ea244beddf8a">logger</a> = logging.getLogger(__name__)</div>
<div class="line"><a name="l00660"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#aa38c7f896c049e7e2051988e0a0f5172">  660</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#aa38c7f896c049e7e2051988e0a0f5172">search_term</a> = search_term</div>
<div class="line"><a name="l00661"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a50df86078f3b71d231051df008d93da7">  661</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a50df86078f3b71d231051df008d93da7">cat</a> = cat</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a98ddcafa694d0834c68d514ead381f79" title="Initializes the data structs used to keep track of the items that have been added to this OutputCalc...">_init_data_structs</a>()</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">## Initializes the data structs used to keep track of the items that have been added to this OutputCalc.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a98ddcafa694d0834c68d514ead381f79">  665</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a98ddcafa694d0834c68d514ead381f79" title="Initializes the data structs used to keep track of the items that have been added to this OutputCalc...">_init_data_structs</a>(self):</div>
<div class="line"><a name="l00666"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#ae4fcd47129d35c3a5427cec33922d3c1">  666</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#ae4fcd47129d35c3a5427cec33922d3c1">utter_list</a> = []</div>
<div class="line"><a name="l00667"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#ade4695df136db217878d85d5d8435e47">  667</a></span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#ade4695df136db217878d85d5d8435e47">chain_list</a> = []</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#af800bec3a06d47d028fef6fa0b183fee">  670</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#af800bec3a06d47d028fef6fa0b183fee" title="See superclass description.">reset</a>(self):</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a98ddcafa694d0834c68d514ead381f79" title="Initializes the data structs used to keep track of the items that have been added to this OutputCalc...">_init_data_structs</a>()</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00674"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a8c5b66631c852653b77fe2983a8f5053">  674</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a8c5b66631c852653b77fe2983a8f5053" title="See superclass description.">get_db_args</a>(self):</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordflow">return</span> [self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#aa38c7f896c049e7e2051988e0a0f5172">search_term</a>, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a50df86078f3b71d231051df008d93da7">cat</a>]</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00678"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a9e8c5432bfde17d8920617cfb69ef8ab">  678</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a9e8c5432bfde17d8920617cfb69ef8ab" title="See superclass description.">get_calc_type_str</a>(self):</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&#39;List&#39;</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a859de7f91946cf8c53df0fe4aa111dc7">  682</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a859de7f91946cf8c53df0fe4aa111dc7" title="See superclass description.">add_seg</a>(self, seg):</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        i = 0</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment">#filter the utterances using the regex - only include utterances that contain a match</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">while</span> seg.utters <span class="keywordflow">and</span> i &lt; len(seg.utters):</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <span class="keywordflow">if</span> seg.utters[i].trans_phrase <span class="keywordflow">and</span> re.search(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#aa38c7f896c049e7e2051988e0a0f5172">search_term</a>, seg.utters[i].trans_phrase):</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                self.utter_list.append(seg.utters[i])</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            i += 1</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00691"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#af2a4d69d30b269a1b20c6f6e5a2cdce4">  691</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#af2a4d69d30b269a1b20c6f6e5a2cdce4" title="See superclass description.">add_chain</a>(self, head):</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        cur = head</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        found = <span class="keyword">False</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="comment">#only include chains that yield at least one regex match</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">while</span> <span class="keywordflow">not</span> found <span class="keywordflow">and</span> cur:</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="keywordflow">if</span> cur.trans_phrase:</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                found = re.search(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#aa38c7f896c049e7e2051988e0a0f5172">search_term</a>, cur.trans_phrase)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            cur = cur.next</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">if</span> found:</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            self.chain_list.append(head)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">## Retreives the transcriber code index, given a user-selected category option.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">#  @param self</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="comment">#  @param cat (int) one of the options from  ListOutpuCalc.LIST_CATS</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <span class="comment">#  @returns (int) the index (zero-based) or the corresponding transcriber code</span></div>
<div class="line"><a name="l00707"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a4977be5c14ab28588ab6d673571f5f5d">  707</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a4977be5c14ab28588ab6d673571f5f5d" title="Retreives the transcriber code index, given a user-selected category option.">_get_trans_code_index</a>(self, cat):</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="keywordflow">return</span> {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            ListOutputCalc.LIST_CATS.SPEAKER_TYPE: 0,</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            ListOutputCalc.LIST_CATS.TARGET_LISTENER: 1,</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            ListOutputCalc.LIST_CATS.COMPLETENESS: 2,</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            ListOutputCalc.LIST_CATS.UTTERANCE_TYPE: 3,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            }[cat]</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="comment">## See superclass description.</span></div>
<div class="line"><a name="l00716"></a><span class="lineno"><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a76b4999da820bc173c93f2b9fd091c1e">  716</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a76b4999da820bc173c93f2b9fd091c1e" title="See superclass description.">write_csv_rows</a>(self, chained, csv_writer):</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        combo = DBConstants.COMBOS[DBConstants.COMBO_GROUPS.LIST_OUTPUT_CALC_CATS][self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a50df86078f3b71d231051df008d93da7">cat</a>]</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;List:&#39;</span>, combo.disp_desc])</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        csv_writer.writerow([<span class="stringliteral">&#39;Search Term:&#39;</span>, self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#aa38c7f896c049e7e2051988e0a0f5172">search_term</a>])</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="comment">#use the selected category option to grab a list of all possible values for the corresponding code</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        trans_code_index = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a4977be5c14ab28588ab6d673571f5f5d" title="Retreives the transcriber code index, given a user-selected category option.">_get_trans_code_index</a>(self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#a50df86078f3b71d231051df008d93da7">cat</a>)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        group_code = DBConstants.TRANS_CODES[trans_code_index]</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        group_code_strs = group_code.get_all_options_codes()</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <span class="comment">#This dictionary holds the list items, separating the groups - it&#39;s keyed by transcriber code.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="comment">#Each value is another dictionary, keyed by utterance.</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="comment">#Note that we can add the same utterance to different groups if we&#39;re working with a multi-character transcriber code.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        group_dict = OrderedDict()</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        data_list = self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#ade4695df136db217878d85d5d8435e47">chain_list</a> <span class="keywordflow">if</span> chained <span class="keywordflow">else</span> self.<a class="code" href="classdata__structs_1_1output__calcs_1_1_list_output_calc.html#ae4fcd47129d35c3a5427cec33922d3c1">utter_list</a></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        <span class="comment">#organize the data into groups based on transcriber code value</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">for</span> utter <span class="keywordflow">in</span> data_list:</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            code_str = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            <span class="keywordflow">if</span> chained:</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                cur = utter</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                <span class="keywordflow">while</span> cur:</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                    <span class="keywordflow">if</span> len(cur.trans_codes) &gt; trans_code_index:</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                        code_str = cur.trans_codes[trans_code_index]</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                        <span class="keywordflow">if</span> <span class="keywordflow">not</span> code_str <span class="keywordflow">in</span> group_dict:</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                            group_dict[code_str] = OrderedDict()</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                            </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                        <span class="keywordflow">if</span> <span class="keywordflow">not</span> utter <span class="keywordflow">in</span> group_dict[code_str]:</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                            group_dict[code_str][utter] = <span class="keyword">True</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                            </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                    cur = cur.next</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                <span class="keywordflow">if</span> len(utter.trans_codes) &gt; trans_code_index:</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                    code_str = utter.trans_codes[trans_code_index]</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                    </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> code_str <span class="keywordflow">in</span> group_dict:</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                        group_dict[code_str] = OrderedDict()</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                        </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                    <span class="keywordflow">if</span> <span class="keywordflow">not</span> utter <span class="keywordflow">in</span> group_dict[code_str]:</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                        group_dict[code_str][utter] = <span class="keyword">True</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="comment">#write out the csv file</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">for</span> code <span class="keywordflow">in</span> group_dict:</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            csv_writer.writerow([<span class="stringliteral">&#39;&#39;</span>])</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            csv_writer.writerow([<span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;Code:&#39;</span>, code])</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            csv_writer.writerow([<span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;Start Time&#39;</span>, <span class="stringliteral">&#39;End Time&#39;</span>, <span class="stringliteral">&#39;LENA Speakers&#39;</span>, <span class="stringliteral">&#39;Phrase&#39;</span>, <span class="stringliteral">&#39;Transcriber Codes&#39;</span>])</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <span class="keywordflow">for</span> utter <span class="keywordflow">in</span> group_dict[code]:</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <span class="keywordflow">if</span> chained:</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                    trans_codes, tail = FilterManager.get_chain_trans_codes(utter)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                    trans_codes = trans_codes.replace(<span class="stringliteral">&#39;\n&#39;</span>, <span class="stringliteral">&#39;&#39;</span>).replace(<span class="stringliteral">&#39;\r&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                    speakers, tail = FilterManager.get_chain_lena_speakers(utter)</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                    speakers = speakers.replace(<span class="stringliteral">&#39;\n&#39;</span>, <span class="stringliteral">&#39;&#39;</span>).replace(<span class="stringliteral">&#39;\r&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                    phrase, tail = FilterManager.get_chain_phrase(utter)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                    phrase = phrase.replace(<span class="stringliteral">&#39;\n&#39;</span>, <span class="stringliteral">&#39;&#39;</span>).replace(<span class="stringliteral">&#39;\r&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                    start_str = BackendUtils.get_time_str(utter.start)</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                    end_str = BackendUtils.get_time_str(tail.end)</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                    csv_writer.writerow([<span class="stringliteral">&#39;&#39;</span>, start_str, end_str, speakers, phrase, trans_codes])</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                    </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    csv_writer.writerow([<span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                                         BackendUtils.get_time_str(utter.start),</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                                         BackendUtils.get_time_str(utter.end),</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                         utter.speaker.speaker_codeinfo.code <span class="keywordflow">if</span> utter.speaker <span class="keywordflow">and</span> utter.speaker.speaker_codeinfo <span class="keywordflow">else</span> <span class="stringliteral">&#39;?&#39;</span>,</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                                         utter.trans_phrase,</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                                         <span class="stringliteral">&#39;|%s|&#39;</span> % (<span class="stringliteral">&#39;|&#39;</span>.join(utter.trans_codes)) <span class="keywordflow">if</span> utter.trans_codes <span class="keywordflow">else</span> <span class="stringliteral">&#39;None&#39;</span>,</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                                     ])</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">## This function fills in the combo_option constants in the above classes.</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">#  These constants exist only for convenience (so you don&#39;t have to access them via DBConstants using the combo group, which invloves a lot of typing).</span></div>
<div class="line"><a name="l00787"></a><span class="lineno"><a class="code" href="namespacedata__structs_1_1output__calcs.html#adbc48f2f89cc423457a51d84596b760b">  787</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacedata__structs_1_1output__calcs.html#adbc48f2f89cc423457a51d84596b760b" title="This function fills in the combo_option constants in the above classes.">fetch_db_constants</a>():</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="comment">#should really remove the &#39;EMPTY&#39; option here somehow...</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    CountOutputCalc.COUNT_TYPES = DBConstants.COMBO_OPTIONS[DBConstants.COMBO_GROUPS.COUNT_OUTPUT_CALC_TYPES]</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    RateOutputCalc.RATE_TYPES = DBConstants.COMBO_OPTIONS[DBConstants.COMBO_GROUPS.RATE_OUTPUT_CALC_TYPES]</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    BreakdownOutputCalc.BREAKDOWN_CRITERIA = DBConstants.COMBO_OPTIONS[DBConstants.COMBO_GROUPS.BREAKDOWN_OUTPUT_CALC_CRITERIA]</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    ListOutputCalc.LIST_CATS = DBConstants.COMBO_OPTIONS[DBConstants.COMBO_GROUPS.LIST_OUTPUT_CALC_CATS]</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<a class="code" href="namespacedata__structs_1_1output__calcs.html#adbc48f2f89cc423457a51d84596b760b" title="This function fills in the combo_option constants in the above classes.">fetch_db_constants</a>()</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8dba4be13e7b5b450dd533232b439a45.html">data_structs</a></li><li class="navelem"><a class="el" href="output__calcs_8py.html">output_calcs.py</a></li>
    <li class="footer">Generated on Fri Jan 9 2015 16:37:09 for Baby Language Lab Scripts by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
