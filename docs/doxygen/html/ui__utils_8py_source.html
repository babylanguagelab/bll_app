<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Baby Language Lab Scripts: C:/Users/Wayne/Documents/baby-lab/bll_app/utils/ui_utils.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="bll_icon.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Baby Language Lab Scripts
   </div>
   <div id="projectbrief">A collection of data processing tools.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ui__utils_8py_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ui_utils.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ui__utils_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="code" href="namespaceutils_1_1ui__utils.html">    1</a></span>&#160;<span class="comment">## @package utils.ui_utils</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">from</span> gi.repository <span class="keyword">import</span> Gtk <span class="keyword">as</span> gtk, Pango</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">from</span> gi.repository <span class="keyword">import</span> GObject <span class="keyword">as</span> gobject</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">from</span> gi.repository <span class="keyword">import</span> GdkPixbuf <span class="keyword">as</span> pixbuf</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">import</span> os</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">import</span> re</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">from</span> dateutil <span class="keyword">import</span> tz</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacedb_1_1bll__database.html">db.bll_database</a> <span class="keyword">import</span> DBConstants, BLLDatabase</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceutils_1_1backend__utils.html">utils.backend_utils</a> <span class="keyword">import</span> BackendUtils</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceutils_1_1enum.html">utils.enum</a> <span class="keyword">import</span> Enum</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">## A collection of static methods and constants for common UI-related tasks.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"># This class should never be instantiated.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html">   18</a></span>&#160;<span class="keyword">class </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html" title="A collection of static methods and constants for common UI-related tasks.">UIUtils</a>(object):</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    <span class="comment">#stores the last directory accessed by the user from a filechooser dialog (see the show_file_dialog() and show_file_dialog_with_checks() methods)</span></div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a3e2bbcb35be4830f2ef52d8df39dbbc7">   20</a></span>&#160;    last_filechooser_location = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <span class="comment">#These static members store gtk.FileFilter constants created by the _get_constants method() of the ui_utils module. They are populated when this file is processed by the Python iterpreter.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#aa199791c06e3b332820783eea16c93c3">   23</a></span>&#160;    WAV_FILE_FILTER = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a80da1c132cfc18055a0993a6ea041c55">   24</a></span>&#160;    TRS_FILE_FILTER = <span class="keywordtype">None</span> </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ae9976eae7f1a6360f720b1b015d92cd0">   25</a></span>&#160;    ALL_FILE_FILTER = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a03c0119650d0ac11ba8f642d6ed3236a">   26</a></span>&#160;    CSV_FILE_FILTER = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a570922f66d63f986f56ca87b752eda5b">   27</a></span>&#160;    TRS_CSV_FILE_FILTER = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">#this is a date-time format string (of the type accepted by the Python datetime.strptime() method - see Python docs) that corresponds to the format in which timestamps come out of the database.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ab1c2d60655e3a212ff407a4f7b67c5bb">   30</a></span>&#160;    DB_DT_OUTPUT_FMT = <span class="stringliteral">&#39;%Y-%m-%d %H:%M:%S&#39;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="comment">#this is a date-time format string that corresponds to the format in which timestamps should be shown in the UI. Timestamps coming out of the database are converted to this format by get_db_timestamp_str().</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a9613b4dc7c458888416c35b1c2cb9775">   32</a></span>&#160;    DT_DISPLAY_FMT = <span class="stringliteral">&#39;%b %d, %Y %I:%M %p&#39;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">#The UI contains lots of buttons that perform common actions. This is a lookup structure (an Enum) that maps actions to (the file path to) descriptive icons. You can use it to create buttons with icons on them.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">#See the create_button() method for more info. The &#39;%s&#39; placeholder will be filled with the name of the directory corresponding to the desired size of the icon - this is done in create_button().</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a9b3f0c5d85d0df5f2146f843786afad6">   36</a></span>&#160;    BUTTON_ICONS = Enum.from_dict({</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;         <span class="stringliteral">&#39;CREATE&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/document-new-8.png&#39;</span>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;         <span class="stringliteral">&#39;OPEN&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/document-open-8.png&#39;</span>,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;         <span class="stringliteral">&#39;ADD&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/list-add-5.png&#39;</span>,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;         <span class="stringliteral">&#39;EDIT&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/edit.png&#39;</span>,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;         <span class="stringliteral">&#39;REMOVE&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/list-remove-5.png&#39;</span>,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;         <span class="stringliteral">&#39;DELETE&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/edit-delete-3.png&#39;</span>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;         <span class="stringliteral">&#39;RUN&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/system-run-2.png&#39;</span>,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;         <span class="stringliteral">&#39;CLOSE&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/application-exit-4.png&#39;</span>,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;         <span class="stringliteral">&#39;EXIT&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/application-exit.png&#39;</span>,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;         <span class="stringliteral">&#39;EXPAND&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/edit-add-3.png&#39;</span>,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;         <span class="stringliteral">&#39;COLLAPSE&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/edit-remove-2.png&#39;</span>,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;         <span class="stringliteral">&#39;REFRESH&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/view-refresh-6.png&#39;</span>,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;         <span class="stringliteral">&#39;PLAY&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/apps/exaile-2.png&#39;</span>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;         <span class="stringliteral">&#39;FLAG&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/flag.png&#39;</span>,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;         <span class="stringliteral">&#39;EXPORT&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/document-export.png&#39;</span>,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;         <span class="stringliteral">&#39;SPLIT&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/edit-copy-9.png&#39;</span>,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;         <span class="stringliteral">&#39;MERGE&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/edit-text-frame-update.png&#39;</span>,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;         <span class="stringliteral">&#39;CLEAR&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/edit-clear-2.png&#39;</span>,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;         <span class="stringliteral">&#39;FILTER&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/filter.png&#39;</span>,</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;         <span class="stringliteral">&#39;PRAAT&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/apps/praat.png&#39;</span>,</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;         <span class="stringliteral">&#39;SAVE&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/actions/document-save-as-6.png&#39;</span>,</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;         <span class="stringliteral">&#39;UPDATE&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/apps/system-software-update-4.png&#39;</span>,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;         <span class="stringliteral">&#39;VOLUME_OFF&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/status/volume-0.png&#39;</span>,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="stringliteral">&#39;VOLUME_ON&#39;</span>: <span class="stringliteral">&#39;icons/open_icon_library-standard/icons/png/%s/status/audio-volume-high-5.png&#39;</span>,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;         })</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">#This enum allows you to select the size of the image you want for your button (see create_button()). The values correspond to the names of subdirectories in the &#39;bll_app/icons/png/&#39; directory.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">#The selected value is interpolated into the value from the BUTTON_ICONS enum (above) within the create_button() method.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a849370838f3d6c6109c431c4fe5d7f45">   65</a></span>&#160;    BUTTON_ICON_SIZES = Enum.from_dict({</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="stringliteral">&#39;PX8&#39;</span>: <span class="stringliteral">&#39;8x8&#39;</span>,</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="stringliteral">&#39;PX16&#39;</span>: <span class="stringliteral">&#39;16x16&#39;</span>,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <span class="stringliteral">&#39;PX22&#39;</span>: <span class="stringliteral">&#39;22x22&#39;</span>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="stringliteral">&#39;PX24&#39;</span>: <span class="stringliteral">&#39;24x24&#39;</span>,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <span class="stringliteral">&#39;PX32&#39;</span>: <span class="stringliteral">&#39;32x32&#39;</span>,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="stringliteral">&#39;PX48&#39;</span>: <span class="stringliteral">&#39;48x48&#39;</span>,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="stringliteral">&#39;PX64&#39;</span>: <span class="stringliteral">&#39;64x64&#39;</span>,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="stringliteral">&#39;PX128&#39;</span>: <span class="stringliteral">&#39;128x128&#39;</span>,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            })</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">## Sets some common GTK properties that all of the apps use. This only needs to be called once at appliation startup.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment"># @param app_icon_filename (string) path to an image file. This icons will be used as the default application icon (appears in the top left-hand corner of all windows)</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a65538c02780be9884518ccfb7a3302bb">   79</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a65538c02780be9884518ccfb7a3302bb" title="Sets some common GTK properties that all of the apps use.">setup_gtk</a>(app_icon_filename):</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="comment">#allow images to appear on buttons</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        gtk.Settings.get_default().set_long_property(<span class="stringliteral">&#39;gtk-button-images&#39;</span>, <span class="keyword">True</span>, <span class="stringliteral">&#39;main&#39;</span>)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="comment">#set default program icon</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        gtk.Window.set_default_icon_list([pixbuf.Pixbuf.new_from_file(app_icon_filename)])</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">## Sets the font size for a given widget</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment"># @param widget (Gtk Container) the widget whose font size you&#39;d like to set</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment"># @param pt_size (int, possibly float too?) the font size (pt)</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment"># @param bold (boolean=False) Set to True to make font bold</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a07d5a821de0279de17ae241c92c10cfd">   90</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a07d5a821de0279de17ae241c92c10cfd" title="Sets the font size for a given widget.">set_font_size</a>(widget, pt_size, bold=False):</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        font = widget.get_style_context().get_font(gtk.StateFlags.NORMAL)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        font.set_size(pt_size * Pango.SCALE)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">if</span> bold:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            font.set_weight(Pango.Weight.BOLD)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        widget.override_font(font)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">## Constructs the full path to an icon, given a value from the BUTTON_ICONS enum, and a value from the BUTTON_ICON_SIZES enum.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment"># @param img_path (string) this must be a value from the BUTTON_ICONS enum</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment"># @param icon_size_dir (string=BUTTON_ICON_SIZES.PX32) this must be a value from the BUTTON_ICON_SIZES enum. Size defaults to 32x32 pixels.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment"># @returns (string) the full path to the icon file</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ac93b83b2af0dda7e13589faaf06a1cca">  102</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ac93b83b2af0dda7e13589faaf06a1cca" title="Constructs the full path to an icon, given a value from the BUTTON_ICONS enum, and a value from the B...">get_icon_path</a>(img_path, icon_size_dir=BUTTON_ICON_SIZES.PX32):</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">return</span> img_path % (icon_size_dir)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment">## Creates a gtk.Button with an icon on it. You can create predefined types of buttons (corresponding to common actions) of any given size by passing in parameters from this class&#39; button enums.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="comment"># Note: in order for this to work, you must first tell gtk to allow images on button - this is done in the setup_gtk() method, so you should call that first.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment"># @param label (string) the text to display on the button.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment"># @param img_path (string) a value from the BUTTON_ICONS enum (indicates the button action)</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment"># @param icon_size_dir (string=BUTTON_ICON_SIZES.PX32) a value from the BUTTON_ICON_SIZES enum, indicating the size of the icon that will be placed on the button. Default is 32x32 pixels.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment"># @returns (gtk.Button) a gtk.Button object with the specified text and image.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a35dd57711acf3cc927b4a68d7fdaa59d">  112</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a35dd57711acf3cc927b4a68d7fdaa59d" title="Creates a gtk.Button with an icon on it.">create_button</a>(label, img_path, icon_size_dir=BUTTON_ICON_SIZES.PX32): <span class="comment">#use BUTTON_ICONS enum for 2nd param, BUTTON_ICON_SIZES enum for 3rd param</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        button = gtk.Button(label)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        img = gtk.Image()</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        full_path = UIUtils.get_icon_path(img_path, icon_size_dir)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        img.set_from_file(full_path)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        button.set_image(img)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">return</span> button</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">## Displays a popup confirmation dialog with yes/no buttons. This method will block until one of the buttons is clicked, at which point it will return a boolean value (indicating which button was clicked) and the dialog will auto-destruct.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment"># @param msg (string) the confirmation message to display (should be a yes/no question so the buttons make sense)</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment"># @returns (boolean) True if &quot;yes&quot; was clicked, False otherwise.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ac8b34d0298d643cfeac9faf35fab8035">  125</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ac8b34d0298d643cfeac9faf35fab8035" title="Displays a popup confirmation dialog with yes/no buttons.">show_confirm_dialog</a>(msg):</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        dialog = gtk.MessageDialog(buttons=gtk.ButtonsType.YES_NO,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                   type=gtk.MessageType.INFO,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                   message_format=msg)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        response = dialog.run()</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        dialog.destroy()</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> response == gtk.ResponseType.YES</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">## Displays a popup dialog (with an ok button) that tells the user to select a row (presumably in some type of UI list).</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment"># This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment"># @param alt_msg (string=None) alternate text to display in place of the default. The default is &#39;Please select a row.&#39;</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a18e454dd86863d64270e5a7d9094ff14">  138</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a18e454dd86863d64270e5a7d9094ff14" title="Displays a popup dialog (with an ok button) that tells the user to select a row (presumably in some t...">show_no_sel_dialog</a>(alt_msg=None):</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        default_msg = <span class="stringliteral">&#39;Please select a row.&#39;</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        UIUtils.show_message_dialog(default_msg <span class="keywordflow">or</span> alt_msg)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">## Displays a popup dialog (with an ok button) that tells the user to make sure all options in a form have been filled out.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment"># This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment"># @param alt_msg (string=None) alternate text to display in place of the default. The default is &#39;Please make sure that all options have been filled out.&#39;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a1ec9d368c21560284c89ae994256c7a2">  146</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a1ec9d368c21560284c89ae994256c7a2" title="Displays a popup dialog (with an ok button) that tells the user to make sure all options in a form ha...">show_empty_form_dialog</a>(alt_msg=None):</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        default_msg = <span class="stringliteral">&#39;Please make sure that all options have been filled out.&#39;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        UIUtils.show_message_dialog(default_msg <span class="keywordflow">or</span> alt_msg)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">## Displays a popup dialog (with an ok button) that presents a textual message.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment"># This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment"># @param message (string) the text to display in the dialog box.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment"># @param dialog_type (int) one of the gtk message type constants (see gtk docs for the MessageDialog class), indicating the type of icon to display in the dialog. This icon indicates whether the</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment"># dialog is an info/question/warning/error message. Possible values are gtk.MESSAGE_INFO, gtk.MESSAGE_WARNING, gtk.MESSAGE_QUESTION, or gtk.MESSAGE_ERROR.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ab333cbb59511bf39dbeadd11d3e540f6">  156</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ab333cbb59511bf39dbeadd11d3e540f6" title="Displays a popup dialog (with an ok button) that presents a textual message.">show_message_dialog</a>(message, dialog_type=gtk.MessageType.INFO):</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        dialog = gtk.MessageDialog(buttons=gtk.ButtonsType.OK,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                   message_format=message,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                   type=dialog_type)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment">#this call blocks until the OK button is clicked</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        dialog.run()</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        dialog.destroy()</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">## Creates a set of gtk.SpinButton inputs to allow the user to input a time in the format hh:mm:ss.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment"># These entries are packing into a horizontal gtk.HBox container, which is fitted with a label.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment"># Here&#39;s what the container looks like when it&#39;s displayed in the UI:</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment"># &lt;img src=&quot;../images/time_spinners.png&quot;&gt;</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment"># @param label (string=None) an optional label to pack at the left side of the container</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment"># @param hours (int=0) value to default the hours spinbutton to</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment"># @param mins (int=0) value to default the minutes spinbutton to</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment"># @param secs (int=0) value to default the seconds spinbutton to</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment"># @returns (tuple) returns a tuple of 4 items: (hbox_container, hours_spinbutton, mins_spinbutton, secs_spinbutton). The spinbuttons are already packed into the hbox container. They are returned individually as well just for convenience</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment"># (so the caller can easily hook up signals without having to extract them from the container first).</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#aadebe9673e760c670045b978ade688b6">  176</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#aadebe9673e760c670045b978ade688b6" title="Creates a set of gtk.SpinButton inputs to allow the user to input a time in the format hh:mm:ss...">get_time_spinners</a>(label=None, hours=0, mins=0, secs=0):</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        entry_box = gtk.HBox()</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        entry_box.pack_start(gtk.Alignment(xalign=0.25, yalign=0), <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordflow">if</span> label:</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            entry_box.pack_start(label, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        hours_adj = gtk.Adjustment(value=0, lower=0, upper=1000, step_incr=1, page_incr=5) <span class="comment">#note: upper is a required param - set it to something that won&#39;t be exceeded</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        hours_spinner = gtk.SpinButton()</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        hours_spinner.set_adjustment(hours_adj)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        hours_spinner.set_value(hours)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        entry_box.pack_start(hours_spinner, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        entry_box.pack_start(gtk.Label(<span class="stringliteral">&#39;:&#39;</span>), <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        mins_adj = gtk.Adjustment(value=0, lower=0, upper=59, step_incr=1, page_incr=5)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        mins_spinner = gtk.SpinButton()</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        mins_spinner.set_adjustment(mins_adj)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        mins_spinner.set_value(mins)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        entry_box.pack_start(mins_spinner, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        entry_box.pack_start(gtk.Label(<span class="stringliteral">&#39;:&#39;</span>), <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        secs_adj = gtk.Adjustment(value=0, lower=0, upper=59, step_incr=1, page_incr=5)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        secs_spinner = gtk.SpinButton()</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        secs_spinner.set_adjustment(secs_adj)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        secs_spinner.set_value(secs)</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        entry_box.pack_start(secs_spinner, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        entry_box.pack_start(gtk.Alignment(xalign=0.25, yalign=0), <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">return</span> entry_box, hours_spinner, mins_spinner, secs_spinner</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="comment">## Returns a string containing the current date and time.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment"># @returns (string) the current timestamp, formatted according to the UIUtils.DT_DISPLAY_FMT pattern.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a60545560201aaef4553e354181dfdb16">  209</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a60545560201aaef4553e354181dfdb16" title="Returns a string containing the current date and time.">get_cur_timestamp_str</a>():</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">return</span> datetime.now().strftime(UIUtils.DT_DISPLAY_FMT)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">## Accepts a string representing a datetime that was retrieved from the database, and converts it into a format suitable for display in the UI.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment"># @param timestamp (string) a timestamp string (retrieved from the DB) in the format UIUtils.DB_DT_OUTPUT_FMT</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="comment"># @returns (string) a timestamp string in the format UIUtils.DT_DISPLAY_FMT</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a6e87b8880c83b8bf1a1fb2ef474e6d62">  216</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a6e87b8880c83b8bf1a1fb2ef474e6d62" title="Accepts a string representing a datetime that was retrieved from the database, and converts it into a...">get_db_timestamp_str</a>(timestamp):</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">return</span> datetime.strptime(timestamp, UIUtils.DB_DT_OUTPUT_FMT).strftime(UIUtils.DT_DISPLAY_FMT)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a7df5532702bf2107fbf15dbee7c28df8">  220</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a7df5532702bf2107fbf15dbee7c28df8">utc_to_local_str</a>(utc_timestamp):</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        from_zone = tz.tzutc()</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        to_zone = tz.tzlocal()</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment"># utc = datetime.utcnow()</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        utc = datetime.strptime(utc_timestamp, UIUtils.DB_DT_OUTPUT_FMT)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="comment"># Tell the datetime object that it&#39;s in UTC time zone since </span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="comment"># datetime objects are &#39;naive&#39; by default</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        utc = utc.replace(tzinfo=from_zone)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment"># Convert time zone</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        local = utc.astimezone(to_zone)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> local.strftime(UIUtils.DT_DISPLAY_FMT)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">## Constructs a gtk.FileFilter object for a set of file extensions.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="comment"># @param title (string) the title for this filer. This title is displayed in the dropdown combobox of file types in filechooser dialogs</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment"># @param patterns (list) a list of strings, where each is a shell-expandible file extension (like &#39;*.wav&#39; or &#39;*.trs&#39;)</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="comment"># @return (gtk.FileFilter) a gtk.FileFilter object that can be passed to a filechooser dialog</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a0d71e07c4fc174f1a5551b8dc0bb4b78">  241</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a0d71e07c4fc174f1a5551b8dc0bb4b78" title="Constructs a gtk.FileFilter object for a set of file extensions.">build_file_filter</a>(title, patterns):</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        file_filter = gtk.FileFilter()</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        file_filter.set_name(title)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        map(file_filter.add_pattern, patterns)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">return</span> file_filter</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">## Builds a simple combo box. Each entry has a title and a value.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment"># The title is displayed, the value is hidden to the user. Here&#39;s what it looks like:</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment"># &lt;img src=&quot;../images/simple_combo.png&quot;&gt;</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment"># By default, the first option is selected. Note: You can make this a row with a label that is an empty string (and value None) if you want it to appear as though nothing is selected by default (as in the above image).</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment"># @param types (tuple) a 2-tuple of type functions (e.g. int, float, str). The</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment"># first element is the type of the label, and the second is the type of the value.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment"># In most cases, the type of the label should be string, so you should pass the the str function as the first element.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment"># Alternatively, you can also use the type constants from the gobject module (gobject.TYPE_STRING, gobject.TYPE_FLOAT, etc.).</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment"># @param labels (list) a list of strings - these will be the options made available for the user to select.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="comment"># @param vals (list) a list of anything - the length must be equal to the length of the labels param. These are the values that</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment"># the labels will be given in the combobox model (assigned in the same order as the elements in the labels list appear).</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment"># These values can be retrieved when you query the combobox selection state.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment"># @returns (gtk.ComboBox) a gtk.ComboBox object that can be used in the UI</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#aca2139de13878d489f5e8477a64066c0">  262</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#aca2139de13878d489f5e8477a64066c0" title="Builds a simple combo box.">build_simple_combo</a>(types, labels, vals):</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        model = gtk.ListStore(*types)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        map(model.append, zip(labels, vals))</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        combobox = gtk.ComboBox(model=model)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        renderer = gtk.CellRendererText()</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        combobox.pack_start(renderer, <span class="keyword">True</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        combobox.add_attribute(renderer, <span class="stringliteral">&#39;text&#39;</span>, 0)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        combobox.set_active(0)</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">return</span> combobox</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">## Builds a simple gtk.ListStore. This is the data store backing for a combobox or treeview.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment"># @param labels (list) list of strings that will be displayed in the list of treeview</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment"># @param vals (list) list of objects, must be same length as labels list. These values are assigned to the rows/options in the widget, and</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment"># can be retrieved when the widget&#39;s selection state is queried.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment"># @param val_type (function pointer) this is function pointer corresponding to a type (like str, int, float, etc.) or it is a type constant from the gobject module (eg. gobject.TYPE_STRING, gobject.TYPE_FLOAT, etc.).</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment"># It indicates the type of the elements in the vals array.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment"># @returns (gtk.ListStore) a liststore object for use in the creation of a combobox or treeview (or potentially other types of widgets).</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a1bfc6c15157b615738c487e4d26dd38e">  282</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a1bfc6c15157b615738c487e4d26dd38e" title="Builds a simple gtk.ListStore.">build_simple_liststore</a>(labels, vals, val_type):</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        list_store = gtk.ListStore(gobject.TYPE_STRING,</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                   val_type)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(labels)):</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            list_store.append([labels[i], vals[i]])</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">return</span> list_store</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">## Builds a treeview (a grid with selectable rows) with a single column. The user may select multiple rows at once.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment"># The treeview has a hidden &#39;ID&#39; column appended to it - you can use this to track the indices of the selected rows (or you can use the vals parameter).</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment"># See the gtk docs for more info on treeviews. Here is what the treeview looks like:</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment"># &lt;img src=&quot;../images/multiselect_treeview.png&quot;&gt;</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment"># @param labels (list) list of strings. These are the values to display in the rows (one element per row).</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment"># @param vals (list) list of anything. These values will be assigned to the rows in the same order as the labels list (therefore it must be of the same length). You can retrieve the values of selected rows when</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment"># querying the treeview widget&#39;s selection state.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment"># @param val_type (function pointer) this is function pointer corresponding to a type (like str, int, float, etc.) or it is a type constant from the gobject module (eg. gobject.TYPE_STRING, gobject.TYPE_FLOAT, etc.).</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment"># It indicates the type of the elements in the vals array.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment"># @param header_text (string) text to display at the top of the single column.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment"># @returns (gtk.TreeView) a gtk.TreeView object that&#39;s set up and ready to embed in the UI</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#abad9605ad103680dc4f10004549fefc3">  303</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#abad9605ad103680dc4f10004549fefc3" title="Builds a treeview (a grid with selectable rows) with a single column.">build_multiselect_treeview</a>(labels, vals, val_type, header_text):</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        list_store = UIUtils.build_simple_liststore(labels, vals, val_type)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        treeview = gtk.TreeView(list_store)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        treeview.get_selection().set_mode(gtk.SelectionMode.MULTIPLE)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        col = gtk.TreeViewColumn(header_text, gtk.CellRendererText(), text=0)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        treeview.append_column(col)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        col.set_sizing(gtk.TreeViewColumnSizing.AUTOSIZE)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        col = gtk.TreeViewColumn(<span class="stringliteral">&#39;ID&#39;</span>, gtk.CellRendererText(), text=1)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        col.set_visible(<span class="keyword">False</span>)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        col.set_sizing(gtk.TreeViewColumnSizing.AUTOSIZE)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        treeview.append_column(col)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">return</span> treeview</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">## Builds a gtk.ListStore that contains a group of common combo options stored in the  DBConstants.COMBO_OPTIONS enum (these ultimately come from the database).</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment"># For example, you could create a liststore of all LENA speaker codes, then display them in a treeview - this is what was done to create the screenshot below:</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment"># &lt;img src=&quot;../images/multiselect_treeview.png&quot;&gt;</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment"># You could just as easily use this liststore to create a combobox, or something else.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment"># @param group_id (int) a value from the DBConstants.COMBO_GROUPS enum, indicating which group of options to insert into the liststore. Combo options are grouped according to their type.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment"># For example, passing a group_id of DBConstants.COMBO_GROUPS.SPEAKER_CODES would create a liststore like the one used in the screenshot shown above.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment"># @param include_empty_option (boolean=True) if True, an option with an empty string label will be pre-pended to the liststore. This can be used as a &quot;nothing-selected&quot; option.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment"># @returns (gtk.ListStore) a liststore object that contains all of the options from the specified group. This object can be used as a data-store backing for other widgets.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ac91d468b4e0389664f1c66fa4994c31e">  328</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ac91d468b4e0389664f1c66fa4994c31e" title="Builds a gtk.ListStore that contains a group of common combo options stored in the DBConstants...">build_options_liststore</a>(group_id, include_empty_option=True):</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        list_store = gtk.ListStore(gobject.TYPE_STRING,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                   gobject.TYPE_INT)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        group_keys_enum = DBConstants.COMBO_OPTIONS[group_id]</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(int(<span class="keywordflow">not</span> include_empty_option), len(group_keys_enum)):</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            group_option_key = group_keys_enum[i]</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            option = DBConstants.COMBOS[group_id][group_option_key]</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> option.hidden:</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                list_store.append([option.disp_desc, option.db_id])</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">return</span> list_store</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">## Computes the minimum number of pixels (width) needed to show a treeview column with the specified title text.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment"># This is an approximation that was emperically determined, and uses magic numbers. It is not guarenteed to work, and</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment"># should probably be removed. But you can try it if you feel frustrated.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment"># @param col_name (string) the text that will be displayed in the column header</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment"># @returns (int) an approximation of the number of pixel you will need to applocate for the width of the treeview column, in order for the whole col_name header string to be displayed.</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a2fcf7a54f5219a913c64041873750ea5">  347</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a2fcf7a54f5219a913c64041873750ea5" title="Computes the minimum number of pixels (width) needed to show a treeview column with the specified tit...">calc_treeview_col_min_width</a>(col_name):</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">return</span> 90 + (len(col_name) / 15) * 50</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">## Builds a gtk.ComboBox widget that contains a group of common combo options stored in the  DBConstants.COMBO_OPTIONS enum (these ultimately come from the database).</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="comment"># For example, you could create a combobox that allows you to select one of the LENA speaker codes.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment"># @param group_id (int) a value from the DBConstants.COMBO_GROUPS enum, indicating which group of options to insert into the liststore.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment"># @param active_index (int=0) the row index of the entry to auto-select. If include_empty_option is True, and this is zero, then the empty entry will be selected.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment"># @param include_empty_option (boolean=True) if True, an option with an empty string label will be pre-pended to the list of options. This can be used as a &quot;nothing-selected&quot; option.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment"># @returns (gtk.ComboBox) a combobox widget containing all of the options for the specified group.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#af4e5f9a00ee6eac0f022d1d4cde4fb33">  357</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#af4e5f9a00ee6eac0f022d1d4cde4fb33" title="Builds a gtk.ComboBox widget that contains a group of common combo options stored in the DBConstants...">build_options_combo</a>(group_id, active_index=0, include_empty_option=True):</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        list_store = UIUtils.build_options_liststore(group_id, include_empty_option)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        combobox = gtk.ComboBox(model=list_store)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        renderer = gtk.CellRendererText()</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        combobox.pack_start(renderer, <span class="keyword">True</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        combobox.add_attribute(renderer, <span class="stringliteral">&#39;text&#39;</span>, 0)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        combobox.set_active(active_index)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">return</span> combobox</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">## Builds a gtk.ComboBox containing options for &quot;common regexs&quot; (COMBO_GROUPS.COMMON_REGEXS).</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment"># When the selected option changes, a text entry box is populated with the regex string.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment"># (This is just a wrapper around the build_options_combo() method for common regexs, to add the ability to connect</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment"># the &#39;changed&#39; signal.)</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment"># @param entry (gtk.Entry) a text entry box that will be populated with a regular expression string when the selection changes</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment"># @returns (gtk.ComboBox) a combobox with the &#39;changed&#39; signal set up</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00376"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a3451fc88121d191c08150d9cf2da7743">  376</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a3451fc88121d191c08150d9cf2da7743" title="Builds a gtk.ComboBox containing options for &quot;common regexs&quot; (COMBO_GROUPS.COMMON_REGEXS).">build_regex_helper_combo</a>(entry):</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        combo = UIUtils.build_options_combo(DBConstants.COMBO_GROUPS.COMMON_REGEXS)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        combo.connect(<span class="stringliteral">&#39;changed&#39;</span>, UIUtils._fill_entry, entry)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">return</span> combo</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">## This is an internal helper method for build_regex_helper_combo(). It populates a text entry with a regex string corresponding to the</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment"># selected option in the combobox. It is called every time the combobox selection changes.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment"># @param combo (gtk.ComboBox) this is a combobox created with the options for the DBConstants.COMBO_GROUPS.COMMON_REGEXS group</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment"># @param entry (gtk.Entry) a text entry to populate with the regex string for the selected combobox option</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a7e2c588a16a04567fd6d91b8d2e9c12c">  387</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a7e2c588a16a04567fd6d91b8d2e9c12c" title="This is an internal helper method for build_regex_helper_combo().">_fill_entry</a>(combo, entry):</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        opt_id = combo.get_model()[combo.get_active()][1]</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        db = <a class="code" href="classdb_1_1bll__database_1_1_b_l_l_database.html" title="Provides BLL-app-specific data retreival and storage routines, building on the base database class...">BLLDatabase</a>()</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="comment"># Ideally, the regex info should come out of an enum in the DBConstants class (such as DBConstants.COMMON_REGEXS).</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="comment"># However, we only have the combobox option id of the selected option, and this isn&#39;t enough to figure out which enum value we need.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="comment"># To solve this problem, I&#39;ve reverted to a database query here, but this should really be fixed in the future...we need something other</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="comment"># than the option id to identify the selected combo option.</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        rows = db.select(<span class="stringliteral">&#39;common_regexs&#39;</span>, <span class="stringliteral">&#39;regex&#39;</span>.split(), <span class="stringliteral">&#39;combo_option_id=?&#39;</span>, [opt_id])</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> rows <span class="keywordflow">and</span> rows[0]:</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            regex = rows[0][0]</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            highlight_start = regex.find(<span class="stringliteral">&#39;&lt;&#39;</span>)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            highlight_end = regex.find(<span class="stringliteral">&#39;&gt;&#39;</span>)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            entry.set_text(regex.replace(<span class="stringliteral">&#39;&lt;&#39;</span>, <span class="stringliteral">&#39;&lt;&#39;</span>).replace(<span class="stringliteral">&#39;&gt;&#39;</span>, <span class="stringliteral">&#39;&gt;&#39;</span>))</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            entry.grab_focus()</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordflow">if</span> highlight_start &gt; -1 <span class="keywordflow">and</span> highlight_end &gt; -1:</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                entry.select_region(highlight_start, highlight_end)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            db.close()</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">## This method opens an &quot;open file&quot; dialog, and populates a text entry widget with the resulting path.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment"># It&#39;s useful to hook up to a &quot;browse&quot; button in the UI. This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment"># @param title (string) text to display in the titlebar of the &quot;open file&quot; dialog</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="comment"># @param entry (gtk.Entry) an entry widget to populate with the path name after the user clicks ok in the &quot;open file&quot; dialog</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment"># @param filters (list=[]) list of gtk.FileFilter objects. A dropdown list of file types displaying these is shown in the &quot;open file&quot; dialog.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment"># You can use the constants in this class to build a list (UIUtils.ALL_FILE_FILTER, UIUtils.WAV_FILE_FILTER, UIUtils.TRS_FILE_FILTER, etc.)</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment"># @param auto_fill_entry (gtk.Entry=None) an optional gtk entry. It is possible to automatically locate another file with the same name as the one the user selects, but a different file extension.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment"># This is useful, for example, when the user is locating a trs file, and you want to automatically locate the corresponding wav file. If this param is not None, an automatic search will be done</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment"># for the corresponding wav file and, if it is found, the entry will be populated with the path. The search encompasses the current directory (the one the user&#39;s selected file is in) and the parent directory.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment"># @param auto_fill_file_extension (string=&#39;wav&#39;) an optional file extension string, used together with auto_fill_entry. This dictates the type of file extension that the search described in</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment"># the auto_fill_entry parameter documentation.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#afb59ab38b5567705a7185f977b886944">  420</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#afb59ab38b5567705a7185f977b886944" title="This method opens an &quot;open file&quot; dialog, and populates a text entry widget with the resulting path...">browse_file</a>(title, entry, filters=[], auto_fill_entry=None, auto_fill_file_extension=&#39;wav&#39;):</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        filename = UIUtils.open_file(title, filters, save_last_location=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">if</span> filename:</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            entry.set_text(filename)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            search_name = filename[:-3] + auto_fill_file_extension</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="comment">#try to automatically find a corresponding wav file in the current or parent directories (in that order)</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="comment">#if one is found, and auto_fill_entry is not None, then the gtk.Entry pointed to be auto_fill_entry will be populated with the path of the found wav file</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="keywordflow">if</span> auto_fill_entry <span class="keywordflow">and</span> auto_fill_entry.get_text() == <span class="stringliteral">&#39;&#39;</span>:</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    <span class="keywordflow">if</span> os.path.exists(search_name):</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                        auto_fill_entry.set_text(search_name)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                        parent_dir = os.path.abspath( os.path.dirname(filename) + os.path.sep + os.path.pardir) <span class="comment">#find absolute name of directory &#39;filename_dir/../&#39;</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        search_name = parent_dir + os.path.sep + os.path.basename(search_name) <span class="comment">#search for file in parent directory</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                        <span class="keywordflow">if</span> os.path.exists(search_name):</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                            auto_fill_entry.set_text(search_name)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                <span class="keywordflow">print</span> <span class="stringliteral">&#39;Unable to find matching %s file: %s&#39;</span> % (auto_fill_file_extension, e)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">## This method opens an &quot;open folder&quot; dialog, and populates a text entry widget with the resulting path.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="comment"># It&#39;s useful to hook up to a &quot;browse&quot; button in the UI. This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment"># @param title (string) text to display in the titlebar of the &quot;open folder&quot; dialog</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment"># @param entry (gtk.Entry) an entry widget to populate with the path name after the user clicks ok in the &quot;open folder&quot; dialog</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment"># @param filters (list=[]) list of gtk.FileFilter objects. This specifies the types of files (via their extensions) that will be visible in the &quot;open folder&quot; dialog.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment"># Since the dialog doesn&#39;t let you select files (only folders), any visible files will appear &quot;greyed out&quot;, and this param really just affects with the user can see, not what they can do.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment"># In general, it is probably most useful to either leave this empty or set it to UIUtils.ALL_FILE_FILTER.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a05dc7e885686be084194f87074db645e">  447</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a05dc7e885686be084194f87074db645e" title="This method opens an &quot;open folder&quot; dialog, and populates a text entry widget with the resulting path...">browse_folder</a>(title, entry, filters=[]):</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        foldername = UIUtils.open_folder(title, filters, save_last_location=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> foldername:</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            entry.set_text(foldername)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">## Shows an &quot;open file&quot; dialog, returning a user-selected filename (if any). This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment"># @param title (string=&#39;Open File&#39;) string to display in the dialog box titlebar</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment"># @param filters (list=[]) list of gtk.FileFilter objects for the dialog to use. A combobox is displayed listing these filters (generally file extensions). Only files matching the pattern will be viewable in the browse pane.</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment"># If no filters are specified, all files will be visible.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment"># @param save_last_location (boolean=False) if True, the directory containing the selected file will be saved (to UIUtils.last_filechoose_location), and the next &quot;open&quot; or &quot;save&quot; dialog will use it as the current directory</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment"># @param cur_location (string=None) if this is non-None, it specifies the path to the folder to use as the current directory - this is the directory initially displayed when the dialog pops up</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment"># @returns (string) the path to the user-selected file. If the user did not select a file, and instead clicked the cancel button or closed the dialog, this method will return None.</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00460"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a6697d8f6919f0af893d724879f82297d">  460</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a6697d8f6919f0af893d724879f82297d" title="Shows an &quot;open file&quot; dialog, returning a user-selected filename (if any).">open_file</a>(title=&#39;Open File&#39;, filters=[], save_last_location=False, cur_location=None):</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> filters:</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            filters = [UIUtils.ALL_FILE_FILTER]</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        filename, open_now = UIUtils.show_file_dialog(title, filters, gtk.FileChooserAction.OPEN, gtk.STOCK_OPEN, save_last_location=save_last_location, cur_location=cur_location)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">return</span> filename</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="comment">## Shows an &quot;open folder&quot; dialog, returning a user-selected foldername (if any). This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="comment"># @param title (string=&#39;Open Folder&#39;) string to display in the dialog box titlebar</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="comment"># @param filters (list=[]) list of gtk.FileFilter objects. This specifies the types of files (via their extensions) that will be visible in the &quot;open folder&quot; dialog.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="comment"># Since the dialog doesn&#39;t let you select files (only folders), any visible files will appear &quot;greyed out&quot;, and this param really just affects with the user can see, not what they can do.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment"># In general, it is probably most useful to either leave this empty or set it to UIUtils.ALL_FILE_FILTER.</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="comment"># @param save_last_location (boolean=False) if True, the directory containing the selected file will be saved (to UIUtils.last_filechoose_location), and the next &quot;open&quot; dialog will use it as the current directory</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment"># @param cur_location (string=None) if this is non-None, it specifies the path to the folder to use as the current directory - this is the directory initially displayed when the dialog pops up</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment"># @returns (string) the path to the user-selected folder. If the user did not select a folder, and instead clicked the cancel button or closed the dialog, this method will return None.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ad6734f5922bfa9d8ca579135bba8c9ba">  476</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#ad6734f5922bfa9d8ca579135bba8c9ba" title="Shows an &quot;open folder&quot; dialog, returning a user-selected foldername (if any).">open_folder</a>(title=&#39;Select Folder&#39;, filters=[], save_last_location=False, cur_location=None):</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> filters:</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            filters = [UIUtils.ALL_FILE_FILTER]</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        foldername, open_now = UIUtils.show_file_dialog(title, filters, gtk.FileChooserAction.SELECT_FOLDER, gtk.STOCK_OPEN, save_last_location=save_last_location, cur_location=cur_location)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keywordflow">return</span> foldername</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="comment">## Shows a &quot;Save file&quot; dialog, returning the path to a user-selected location. This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment"># @param title (string=&quot;Save File&quot;) text to display in the dialog box titlebar</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment"># @param filters (list=[]) list of gtk.FileFilter objects. This specifies the types of files (via their extensions) that will be visible in the &quot;save&quot; dialog.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="comment"># @param open_now_opt (boolean=False) if True, a checkbox will be displayed along the bottom of the save dialog box that allows the use to open the saved file as soon as it is finished being written to disk (opened in Excel).</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment"># @param save_last_location (boolean=False) if True, the directory containing the selected file will be saved (to UIUtils.last_filechoose_location), and the next &quot;open&quot; or &quot;save&quot; dialog will use it as the current directory</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="comment"># @param cur_location (string=None) a path to a folder to set the dialog to show when it opens. If None, this will display whatever directory GTK feels like.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment"># @returns (string) the save path. If the user did not enter one, and instead clicked the cancel button or closed the dialog, this method will return None.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a516f52c7988dc0d441df3b573842d0e3">  491</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a516f52c7988dc0d441df3b573842d0e3" title="Shows a &quot;Save file&quot; dialog, returning the path to a user-selected location.">save_file</a>(title=&#39;Save File&#39;, filters=[], open_now_opt=False, save_last_location=False, cur_location=None):</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> filters:</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            filters = [UIUtils.ALL_FILE_FILTER]</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">return</span> UIUtils.show_file_dialog(title, filters, gtk.FileChooserAction.SAVE, gtk.STOCK_SAVE, open_now_opt, save_last_location=save_last_location, cur_location=cur_location)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="comment">## Shows a dialog box with a message, a single text entry, and a set of buttons (e.g. ok/cancel). This allows the user to enter a string value. This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment"># Here is what the dialog looks like, (the red message at the bottom is shown only if the user clicks ok after entering invalid text/no text).</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment"># &lt;img src=&quot;../images/entry_dialog.png&quot;&gt;</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment"># @param msg (string) message to display above the entry. This is generally some instructions about what to type in the entry.</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment"># @param entry_title (string) This text will be displayed directly to the left of the entry. Usually it is some text with a colon that acts as a title for the entry.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="comment"># @param default_text (string=&#39;&#39;) The entry will be prepopulated with this text when the dialog box opens.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment"># @param validate_regex (string=r&#39;^.+$&#39;) a regular expression that will be used to validate the text in the entry when the user clicks ok. If the regex does not match the text, invalid_msg will be displayed and the dialog will remain open.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment"># The default value for this parameter is a regex that matches any text except the empty string (this just makes sure the user enters something).</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment"># @param invalid_msg (string=&#39;Please enter a value&#39;) this text will be shown below the dialog, in red, if the user clicks ok and the text they entered does not match validate_regex. In this case, the dialog will not close.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment"># @returns (string) The string that the user typed into the entry, or None if they clicked the cancel button or closed the dialog.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00507"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a963b9a6791281657ecaff35daad6ff2b">  507</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a963b9a6791281657ecaff35daad6ff2b" title="Shows a dialog box with a message, a single text entry, and a set of buttons (e.g.">show_entry_dialog</a>(msg, entry_title, default_text=&#39;&#39;, validate_regex=r&#39;^.+$&#39;, invalid_msg=&#39;Please enter a value.&#39;):</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        dialog = gtk.MessageDialog(buttons=gtk.ButtonsType.OK_CANCEL,</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                   message_format=msg,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                                   type=gtk.MessageType.QUESTION)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        message_area = dialog.get_message_area()</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        vbox = gtk.VBox()</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        entry_label = gtk.Label(entry_title)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        entry = gtk.Entry()</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        entry.set_text(default_text)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        invalid_label = gtk.Label(<span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        hbox = gtk.HBox()</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        hbox.pack_start(entry_label, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        hbox.pack_start(entry, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        vbox.pack_start(hbox, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        vbox.pack_start(invalid_label, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        message_area.pack_end(vbox, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        vbox.show_all()</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        done = <span class="keyword">False</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        text = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keywordflow">while</span> text == <span class="keywordtype">None</span> <span class="keywordflow">and</span> dialog.run() == gtk.ResponseType.OK:</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            entry_input = entry.get_text()</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="keywordflow">if</span> re.match(validate_regex, entry_input):</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                text = entry_input</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                invalid_label.set_markup(<span class="stringliteral">&#39;&lt;span foreground=&quot;red&quot;&gt;%s&lt;/span&gt;&#39;</span> % (invalid_msg))</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        dialog.destroy()</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">return</span> text</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment">## This method shows a a file dialog box (for &quot;open&quot; or &quot;save&quot;) that (in addition to its regular buttons and controls) contains one or more checkboxes that the user can toggle.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment"># The checkboxes&#39; states are returned, along with the user-specified path string (corresponding to the filesystem location they chose). This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment"># @param title (string) text to display in the dialog box titlebar</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment"># @param filters (list=[]) list of gtk.FileFilter objects. This specifies the types of files (via their extensions) that will be visible in the dialog.</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="comment"># @param action (int) This is a gtk filechooser action constant (one of gtk.FILE_CHOOSER_ACTION_OPEN, gtk.FILE_CHOOSER_ACTION_SAVE, gtk.FILE_CHOOSER_ACTION_SELECT_FOLDER or gtk.FILE_CHOOSER_ACTION_CREATE_FOLDER),</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment"># indicating the type of dialog to display.</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment"># @param confirm_button_stock (int) a gtk stock icon constant (e.g. gtk.STOCK_OK, gtk.STOCK_OPEN), indicating what type of text and icon to display on the &quot;ok&quot; button. For a complete list of stock constants, see</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment"># &lt;a href=&quot;http://www.pygtk.org/docs/pygtk/gtk-stock-items.html&quot;&gt;the PyGTK docs here&lt;/a&gt;.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="comment"># @param checkbuttons (list) a list of gtk.CheckButton objects (i.e. checkboxes) to display in the dialog. See return value description for how to obtain their state when the ok button is pressed.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="comment"># @param save_last_location (boolean=False) if True, the directory containing the selected file will be saved (to UIUtils.last_filechoose_location), and the next &quot;open&quot; or &quot;save&quot; dialog will use it as the current directory</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment"># @returns (string, list) a 2-tuple. The first element is the path the user has selected using the dialog controls (for example, the path to the file to open). The second element is a list of boolean values. Each value corresponds to one checkbutton.</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="comment"># A value of True indicates that the checkbox was checked when the user clicked ok - False indicates it was unchecked.</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a93980f0b79e81da87519dc3a8e02ae53">  556</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a93980f0b79e81da87519dc3a8e02ae53" title="This method shows a a file dialog box (for &quot;open&quot; or &quot;save&quot;) that (in addition to its regular buttons...">show_file_dialog_with_checks</a>(title, filters, action, confirm_button_stock, checkbuttons, save_last_location=False):</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        filename = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        check_results = []</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        dialog = gtk.FileChooserDialog(title=title,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                       action=action,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                       buttons=(gtk.STOCK_CANCEL, gtk.ResponseType.CANCEL, confirm_button_stock, gtk.ResponseType.OK))</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        dialog.set_default_response(gtk.ResponseType.OK)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">if</span> save_last_location <span class="keywordflow">and</span> UIUtils.last_filechooser_location:</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            dialog.set_current_folder(UIUtils.last_filechooser_location)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">for</span> cur_filter <span class="keywordflow">in</span> filters:</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            dialog.add_filter(cur_filter)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">if</span> checkbuttons:</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            content_area = dialog.get_content_area()</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            vbox = gtk.VBox()</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <span class="keywordflow">for</span> button <span class="keywordflow">in</span> checkbuttons:</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                align = gtk.Alignment(xalign=1.0, yalign=1.0)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                align.add(button)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                vbox.pack_start(align, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            content_area.pack_end(vbox, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            vbox.show_all()</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        response = dialog.run()</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">if</span> response == gtk.ResponseType.OK:</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            filename = dialog.get_filename()</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <span class="keywordflow">for</span> button <span class="keywordflow">in</span> checkbuttons:</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                check_results.append(button.get_active())</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        dialog.destroy()</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">if</span> save_last_location <span class="keywordflow">and</span> filename:</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            UIUtils.last_filechooser_location = os.path.dirname(filename)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="keywordflow">return</span> filename, check_results</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">## This method shows a a file dialog box (for &quot;open&quot; or &quot;save&quot;) with controls that allow the user to select a file. This method blocks until the user clicks ok.</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="comment"># @param title (string) text to display in the dialog box titlebar</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment"># @param filters (list=[]) list of gtk.FileFilter objects. This specifies the types of files (via their extensions) that will be visible in the dialog.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="comment"># @param action (int) This is a gtk filechooser action constant (one of gtk.FILE_CHOOSER_ACTION_OPEN, gtk.FILE_CHOOSER_ACTION_SAVE, gtk.FILE_CHOOSER_ACTION_SELECT_FOLDER or gtk.FILE_CHOOSER_ACTION_CREATE_FOLDER),</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment"># indicating the type of dialog to display.</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment"># @param confirm_button_stock (int) a gtk stock icon constant (e.g. gtk.STOCK_OK, gtk.STOCK_OPEN), indicating what type of text and icon to display on the &quot;ok&quot; button. For a complete list of stock constants, see</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment"># &lt;a href=&quot;http://www.pygtk.org/docs/pygtk/gtk-stock-items.html&quot;&gt;the PyGTK docs here&lt;/a&gt;.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment"># @param open_now_opt (boolean=False) if True, a checkbox will be displayed in the dialog with the title &quot;Open Immediately&quot;. Its value (True=checked, False=unchecked) is returned along with the path when this method returns. Typically this is used</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment"># in save dialogs to allow the user to indicate that they would like to open a file immediately after it is saved to disk.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment"># @param save_last_location (boolean=False) if True, the directory containing the selected file will be saved (to UIUtils.last_filechoose_location), and the next &quot;open&quot; or &quot;save&quot; dialog will use it as the current directory</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment"># @param cur_location (string=None) a path to a folder to set the dialog to show when it opens. If None, this will display whatever directory GTK feels like.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment"># @returns (string, list) a 2-tuple. The first element is the path the user has selected using the dialog controls (for example, the path to the file to open). The second element is a boolean value indicating the status of the &quot;open now&quot; checkbox (if present).</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment"># A value of True indicates that the checkbox was checked when the user clicked ok - False indicates it was unchecked (or that the checkbox is not being shown).</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00608"></a><span class="lineno"><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a0e98843c45cff7e6bc583428b77543c7">  608</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classutils_1_1ui__utils_1_1_u_i_utils.html#a0e98843c45cff7e6bc583428b77543c7" title="This method shows a a file dialog box (for &quot;open&quot; or &quot;save&quot;) with controls that allow the user to sel...">show_file_dialog</a>(title, filters, action, confirm_button_stock, open_now_opt=False, save_last_location=False, cur_location=None):</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        filename = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        open_now_checkbox = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        open_now = <span class="keyword">False</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        dialog = gtk.FileChooserDialog(title=title,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                       action=action,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                       buttons=(gtk.STOCK_CANCEL, gtk.ResponseType.CANCEL, confirm_button_stock, gtk.ResponseType.OK))</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        dialog.set_default_response(gtk.ResponseType.OK)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">if</span> cur_location:</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            dialog.set_current_folder(cur_location)</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">elif</span> save_last_location <span class="keywordflow">and</span> UIUtils.last_filechooser_location:</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            dialog.set_current_folder(UIUtils.last_filechooser_location)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        map(<span class="keyword">lambda</span> f: dialog.add_filter(f), filters)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">if</span> open_now_opt:</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="comment">#splice in the &#39;open immediately checkbox&#39;</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            content_area = dialog.get_content_area()</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            open_now_checkbox = gtk.CheckButton(<span class="stringliteral">&#39;Open Immediately&#39;</span>)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            open_now_checkbox.set_active(<span class="keyword">True</span>)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            align = gtk.Alignment(xalign=1.0, yalign=1.0)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            align.add(open_now_checkbox)</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            content_area.pack_end(align, <span class="keyword">False</span>, <span class="keyword">False</span>, 0)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            open_now_checkbox.show()</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            align.show()</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        response = dialog.run()</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">if</span> response == gtk.ResponseType.OK:</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            filename = dialog.get_filename()</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordflow">if</span> open_now_opt:</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                open_now = open_now_checkbox.get_active()</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        dialog.destroy()</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">if</span> save_last_location <span class="keywordflow">and</span> filename:</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            UIUtils.last_filechooser_location = os.path.dirname(filename)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        </div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">return</span> filename, open_now</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">## This function is executed (by the call directly below it in the code) when the Python iterpreter reads this file for the first time.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"># It populates all of the static constants in the UIUtils class. We cannot do this at class creation time (or in the class constructor)</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"># because it involves calling static UIUtils methods, and UIUtils has not yet been defined in either of those cases.</span></div>
<div class="line"><a name="l00651"></a><span class="lineno"><a class="code" href="namespaceutils_1_1ui__utils.html#a53964257ba13590add65c2ab8e861370">  651</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespaceutils_1_1ui__utils.html#a53964257ba13590add65c2ab8e861370" title="This function is executed (by the call directly below it in the code) when the Python iterpreter read...">_get_constants</a>():</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="comment">#Create some static common filter objects that can be passed to the dialog box methods in the UIUtils class.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="comment">#These are provided only for convenience. Calling code is free to create filter for other types of files/folders.</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    UIUtils.WAV_FILE_FILTER = UIUtils.build_file_filter(<span class="stringliteral">&#39;WAV Files&#39;</span>, [<span class="stringliteral">&#39;*.wav&#39;</span>])</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    UIUtils.TRS_FILE_FILTER = UIUtils.build_file_filter(<span class="stringliteral">&#39;TRS Files&#39;</span>, [<span class="stringliteral">&#39;*.trs&#39;</span>])</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    UIUtils.ALL_FILE_FILTER = UIUtils.build_file_filter(<span class="stringliteral">&#39;All Files&#39;</span>, [<span class="stringliteral">&#39;*&#39;</span>])</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    UIUtils.CSV_FILE_FILTER = UIUtils.build_file_filter(<span class="stringliteral">&#39;CSV Files&#39;</span>, [<span class="stringliteral">&#39;*.csv&#39;</span>])</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    UIUtils.TRS_CSV_FILE_FILTER = UIUtils.build_file_filter(<span class="stringliteral">&#39;TRS/CSV Files&#39;</span>, [<span class="stringliteral">&#39;*.trs&#39;</span>, <span class="stringliteral">&#39;*.csv&#39;</span>])</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<a class="code" href="namespaceutils_1_1ui__utils.html#a53964257ba13590add65c2ab8e861370" title="This function is executed (by the call directly below it in the code) when the Python iterpreter read...">_get_constants</a>()</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_cbdb8362360e11eafe2fa3bc74cf0ffd.html">utils</a></li><li class="navelem"><a class="el" href="ui__utils_8py.html">ui_utils.py</a></li>
    <li class="footer">Generated on Tue May 5 2015 13:23:04 for Baby Language Lab Scripts by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
